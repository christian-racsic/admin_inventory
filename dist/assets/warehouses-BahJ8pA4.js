import{_ as z}from"./DialogCloseBtn-Cpwqmvb9.js";import{r,o as O,c as y,a as h,w as e,b as l,d as S,t as D,e as M,f as w,u as a,g as b,V as U,i as x,h as Y,k as Z,l as q}from"./index-W4kja-31.js";import{$ as B}from"./api-DxrbhZSf.js";import{V as N}from"./VCard-CrSgQsdG.js";import{V as R}from"./VCardText-D-w9kZpv.js";import{V as G}from"./VForm-D3Vuhlg_.js";import{V as j,a as d}from"./VRow-f7OHVuKd.js";import{V as C}from"./VAlert-ELbKA5bW.js";import{V as K}from"./VDialog-CqxdfU_E.js";import{V as L}from"./VTextField-DIHLaahk.js";import{V as X}from"./VTextarea-DO_zl4Eg.js";import{V as F}from"./VSelect-CLTqdzaG.js";import{_ as ee}from"./IconBtn-BnO4JjSS.js";import{V as le}from"./VDataTable-Ctd8mvtt.js";import{V as P}from"./VChip-6YKG-Q6j.js";import"./index-BYrzgnBV.js";import"./VAvatar-D-KF6a6N.js";import"./VImg-BXz4PYAy.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VOverlay-DsWRzxlS.js";import"./VList-DFWg69W8.js";import"./VDivider-D7rU52Ox.js";import"./VMenu-HxKMt7sI.js";import"./VCheckboxBtn-D15mcKdF.js";import"./VPagination-D84KJ4BT.js";import"./VTable-Cddsam7K.js";import"./filter-CbKp_48J.js";const ae={class:"text-center pb-6"},se={class:"text-h4 mb-2"},te={__name:"WarehouseDeleteDialog",props:{isDialogVisible:{type:Boolean,required:!0},warehouseSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","deleteWarehouse"],setup($,{emit:T}){const u=$,V=T,i=r(null),o=r(null),c=r(null),m=async()=>{i.value=null,o.value=null,c.value=null;try{const g=await B("warehouses/"+u.warehouseSelected.id,{method:"DELETE",onResponseError({response:k}){o.value=k._data.error}});console.log(g),V("deleteWarehouse",u.warehouseSelected),n()}catch(g){console.log(g)}};O(()=>{console.log(u.warehouseSelected)});const n=()=>{V("update:isDialogVisible",!1)},_=g=>{V("update:isDialogVisible",g)};return(g,k)=>{const A=z;return h(),y(K,{"max-width":"650","model-value":u.isDialogVisible,"onUpdate:modelValue":_},{default:e(()=>[l(N,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(A,{variant:"text",size:"default",onClick:n}),l(R,{class:"pt-5"},{default:e(()=>[S("div",ae,[S("h4",se," Delete Warehouse : "+D(u.warehouseSelected.id),1)]),l(G,{class:"mt-4",onSubmit:M(m,["prevent"])},{default:e(()=>[l(j,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[S("p",null,"Â¿Estas seguro de eliminar el ALMACÃ‰N : "+D(u.warehouseSelected.name)+"?",1)]),_:1}),a(i)?(h(),y(d,{key:0,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[b(D(a(i)),1)]),_:1})]),_:1})):w("",!0),a(o)?(h(),y(d,{key:1,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[b(D(a(o)),1)]),_:1})]),_:1})):w("",!0),a(c)?(h(),y(d,{key:2,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[b(D(a(c)),1)]),_:1})]),_:1})):w("",!0),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(U,{type:"submit",color:"error"},{default:e(()=>[b(" Eliminar ")]),_:1}),l(U,{color:"secondary",variant:"outlined",onClick:n},{default:e(()=>[b(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},oe={class:"text-center pb-6"},ue={class:"text-h4 mb-2"},re={__name:"WarehouseEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},sucursales:{type:Object,required:!0},warehouseSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","editWarehouse"],setup($,{emit:T}){const u=$,V=T,i=r(null),o=r(null),c=r(null),m=r(1),n=r(null),_=r(null),g=r(null),k=async()=>{if(n.value=null,_.value=null,g.value=null,!i.value){setTimeout(()=>{n.value="Se debe llenar el nombre del almacÃ©n"},50);return}if(!o.value){setTimeout(()=>{n.value="Se debe llenar la direcciÃ³n del almacÃ©n"},50);return}if(!c.value){setTimeout(()=>{n.value="Se debe seleccionar una sucursal para el almacÃ©n"},50);return}let f={name:i.value,address:o.value,sucursale_id:c.value,state:m.value};try{const p=await B("warehouses/"+u.warehouseSelected.id,{method:"PATCH",body:f,onResponseError({response:s}){_.value=s._data.error}});console.log(p),p.message==403?_.value=p.message_text:(g.value="El almacÃ©n se ha editado correctamente",V("editWarehouse",p.warehouse),n.value=null,_.value=null)}catch(p){console.log(p)}},A=()=>{V("update:isDialogVisible",!1)},E=f=>{V("update:isDialogVisible",f)};return O(()=>{i.value=u.warehouseSelected.name,o.value=u.warehouseSelected.address,c.value=u.warehouseSelected.sucursale_id,m.value=u.warehouseSelected.state}),(f,p)=>{const s=z;return h(),y(K,{"max-width":"650","model-value":u.isDialogVisible,"onUpdate:modelValue":E},{default:e(()=>[l(N,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(s,{variant:"text",size:"default",onClick:A}),l(R,{class:"pt-5"},{default:e(()=>[S("div",oe,[S("h4",ue," Edit Warehouse : "+D(u.warehouseSelected.name),1)]),l(G,{class:"mt-4",onSubmit:M(k,["prevent"])},{default:e(()=>[l(j,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[l(L,{modelValue:a(i),"onUpdate:modelValue":p[0]||(p[0]=t=>x(i)?i.value=t:null),label:"Nombre",placeholder:"Example: Admin"},null,8,["modelValue"])]),_:1}),a(n)?(h(),y(d,{key:0,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[b(D(a(n)),1)]),_:1})]),_:1})):w("",!0),a(_)?(h(),y(d,{key:1,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[b(D(a(_)),1)]),_:1})]),_:1})):w("",!0),a(g)?(h(),y(d,{key:2,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[b(D(a(g)),1)]),_:1})]),_:1})):w("",!0),l(d,{cols:"12"},{default:e(()=>[l(X,{modelValue:a(o),"onUpdate:modelValue":p[1]||(p[1]=t=>x(o)?o.value=t:null),label:"DirecciÃ³n: ",placeholder:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"6"},{default:e(()=>[l(F,{items:u.sucursales,"item-title":"name","item-value":"id",modelValue:a(c),"onUpdate:modelValue":p[2]||(p[2]=t=>x(c)?c.value=t:null),label:"Sucursal",placeholder:"Select Item",eager:""},null,8,["items","modelValue"])]),_:1}),l(d,{cols:"6"},{default:e(()=>[l(F,{items:[{name:"Activo",id:1},{name:"Inactivo",id:2}],"item-title":"name","item-value":"id",modelValue:a(m),"onUpdate:modelValue":p[3]||(p[3]=t=>x(m)?m.value=t:null),label:"Estado",placeholder:"Select Item",eager:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(U,{type:"submit"},{default:e(()=>[b(" Editar ")]),_:1}),l(U,{color:"secondary",variant:"outlined",onClick:A},{default:e(()=>[b(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ie=S("div",{class:"text-center pb-6"},[S("h4",{class:"text-h4 mb-2"}," Add Warehouse ")],-1),ne={__name:"WarehouseAddDialog",props:{isDialogVisible:{type:Boolean,required:!0},sucursales:{type:Object,required:!0}},emits:["update:isDialogVisible","addWarehouse"],setup($,{emit:T}){const u=$,V=T,i=r(null),o=r(null),c=r(null),m=r(null),n=r(null),_=r(null),g=async()=>{if(m.value=null,n.value=null,_.value=null,!i.value){setTimeout(()=>{m.value="Se debe llenar el nombre del almacÃ©n"},50);return}if(!o.value){setTimeout(()=>{m.value="Se debe llenar la direcciÃ³n del almacÃ©n"},50);return}if(!c.value){setTimeout(()=>{m.value="Se debe seleccionar una sucursal para el almacÃ©n"},50);return}let E={name:i.value,address:o.value,sucursale_id:c.value,state:1};try{const f=await B("warehouses",{method:"POST",body:E,onResponseError({response:p}){n.value=p._data.error}});console.log(f),f.message==403?n.value=f.message_text:(_.value="El almacÃ©n se ha registrado correctamente",V("addWarehouse",f.warehouse),i.value="",o.value="",c.value="",m.value=null,n.value=null,_.value=null,k())}catch(f){console.log(f)}},k=()=>{V("update:isDialogVisible",!1)},A=E=>{V("update:isDialogVisible",E)};return(E,f)=>{const p=z;return h(),y(K,{"max-width":"650","model-value":u.isDialogVisible,"onUpdate:modelValue":A},{default:e(()=>[l(N,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(p,{variant:"text",size:"default",onClick:k}),l(R,{class:"pt-5"},{default:e(()=>[ie,l(G,{class:"mt-4",onSubmit:M(g,["prevent"])},{default:e(()=>[l(j,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[l(L,{modelValue:a(i),"onUpdate:modelValue":f[0]||(f[0]=s=>x(i)?i.value=s:null),label:"Nombre",placeholder:"Example: Admin"},null,8,["modelValue"])]),_:1}),a(m)?(h(),y(d,{key:0,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[b(D(a(m)),1)]),_:1})]),_:1})):w("",!0),a(n)?(h(),y(d,{key:1,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[b(D(a(n)),1)]),_:1})]),_:1})):w("",!0),a(_)?(h(),y(d,{key:2,cols:"12"},{default:e(()=>[l(C,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[b(D(a(_)),1)]),_:1})]),_:1})):w("",!0),l(d,{cols:"12"},{default:e(()=>[l(X,{modelValue:a(o),"onUpdate:modelValue":f[1]||(f[1]=s=>x(o)?o.value=s:null),label:"DirecciÃ³n: ",placeholder:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"6"},{default:e(()=>[l(F,{items:u.sucursales,"item-title":"name","item-value":"id",modelValue:a(c),"onUpdate:modelValue":f[2]||(f[2]=s=>x(c)?c.value=s:null),label:"Sucursal",placeholder:"Select Item",eager:""},null,8,["items","modelValue"])]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(U,{type:"submit"},{default:e(()=>[b(" Guardar ")]),_:1}),l(U,{color:"secondary",variant:"outlined",onClick:k},{default:e(()=>[b(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},de={class:"text-h6"},ce={class:"text-h6"},me={class:"d-flex gap-1"},ze={__name:"warehouses",setup($){const T=[{title:"ID",key:"id"},{title:"AlmacÃ©n",key:"name"},{title:"DirecciÃ³n",key:"address"},{title:"Sucursal",key:"sucursal123"},{title:"Estado",key:"state"},{title:"Fecha de registro",key:"created_at"},{title:"Acciones",key:"action"}],u=r(!1),V=r(!1),i=r(!1),o=r([]),c=r([]),m=r(null),n=r(null),_=r(null),g=async()=>{try{const s=await B("warehouses?search="+(m.value?m.value:""),{method:"GET",onResponseError({response:t}){console.log(t._data.error)}});console.log(s),o.value=s.warehouses,c.value=s.sucursales}catch(s){console.log(s)}},k=s=>{console.log(s);let t=o.value;o.value=[],t.unshift(s),setTimeout(()=>{o.value=t},50)},A=s=>{console.log(s);let t=o.value;o.value=[];let W=t.findIndex(I=>I.id==s.id);W!=-1&&(t[W]=s),setTimeout(()=>{o.value=t},50)},E=s=>{console.log(s);let t=o.value;o.value=[];let W=t.findIndex(I=>I.id==s.id);W!=-1&&t.splice(W,1),setTimeout(()=>{o.value=t},50)},f=s=>{console.log(s),V.value=!0,n.value=s},p=s=>{i.value=!0,_.value=s};return O(()=>{g()}),(s,t)=>{const W=ee,I=ne,H=re,Q=te;return h(),Y("div",null,[l(N,{title:"ðŸ¬ Almacenes"},{default:e(()=>[l(R,null,{default:e(()=>[l(j,{class:"justify-space-between"},{default:e(()=>[l(d,{cols:"3"},{default:e(()=>[l(L,{placeholder:"Search Warehouses",density:"compact",class:"me-3",modelValue:a(m),"onUpdate:modelValue":t[0]||(t[0]=v=>x(m)?m.value=v:null),onKeyup:Z(g,["enter"])},null,8,["modelValue"])]),_:1}),l(d,{cols:"2",class:"text-end"},{default:e(()=>[l(U,{onClick:t[1]||(t[1]=v=>u.value=!a(u))},{default:e(()=>[b(" Add Warehouse "),l(q,{end:"",icon:"ri-add-line"})]),_:1})]),_:1})]),_:1})]),_:1}),l(le,{headers:T,items:a(o),"items-per-page":5,class:"text-no-wrap"},{"item.id":e(({item:v})=>[S("span",de,D(v.id),1)]),"item.sucursal123":e(({item:v})=>[S("span",ce,D(v.sucursal.name),1)]),"item.state":e(({item:v})=>[v.state==1?(h(),y(P,{key:0,color:"primary"},{default:e(()=>[b(" Activo ")]),_:1})):w("",!0),v.state==2?(h(),y(P,{key:1,color:"error"},{default:e(()=>[b(" Inactivo ")]),_:1})):w("",!0)]),"item.action":e(({item:v})=>[S("div",me,[l(W,{size:"small",onClick:J=>f(v)},{default:e(()=>[l(q,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),l(W,{size:"small",onClick:J=>p(v)},{default:e(()=>[l(q,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])]),_:1},8,["items"])]),_:1}),l(I,{isDialogVisible:a(u),"onUpdate:isDialogVisible":t[2]||(t[2]=v=>x(u)?u.value=v:null),sucursales:a(c),onAddWarehouse:k},null,8,["isDialogVisible","sucursales"]),a(n)&&a(V)?(h(),y(H,{key:0,sucursales:a(c),isDialogVisible:a(V),"onUpdate:isDialogVisible":t[3]||(t[3]=v=>x(V)?V.value=v:null),warehouseSelected:a(n),onEditWarehouse:A},null,8,["sucursales","isDialogVisible","warehouseSelected"])):w("",!0),a(_)&&a(i)?(h(),y(Q,{key:1,isDialogVisible:a(i),"onUpdate:isDialogVisible":t[4]||(t[4]=v=>x(i)?i.value=v:null),warehouseSelected:a(_),onDeleteWarehouse:E},null,8,["isDialogVisible","warehouseSelected"])):w("",!0)])}}};export{ze as default};
