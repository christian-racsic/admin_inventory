import{_ as L}from"./DialogCloseBtn-CmFX9Z5g.js";import{r,o as M,c as _,a as g,w as e,b as l,d as E,t as x,e as G,f as D,u as o,g as v,V as R,i as w,h as J,k as W,l as $,C as Y}from"./index-CTHS9Uo5.js";import{$ as N}from"./api-DV6oDQ6t.js";import{V as F}from"./VCard-DCSOa-uS.js";import{V as B}from"./VCardText-DvHr5E0T.js";import{V as P}from"./VForm-DutAvWyc.js";import{V as O,a as d}from"./VRow-BhAPnYDA.js";import{V as A}from"./VAlert-DEc64QkE.js";import{V as z}from"./VDialog-BCy7d4kf.js";import{V as j}from"./VTextField-ZaB3RHnj.js";import{V as H}from"./VFileInput-DcGlPz5e.js";import{V as q}from"./VImg-DbUZi3rZ.js";import{V as ee}from"./VSelect-I2Djs2tK.js";import{_ as le}from"./IconBtn-DXVljAVB.js";import{V as te}from"./VDataTable-DUyQL6-2.js";import{V as Z}from"./VChip-C2kZ6mQo.js";import{V as ae}from"./VAvatar-B74PEF1E.js";import"./index-BYrzgnBV.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VOverlay-CQPilPWj.js";import"./VList-BeeB6M1u.js";import"./VDivider-D7LS911x.js";import"./VMenu-B-CF11VB.js";import"./VCheckboxBtn-Mk3d90yG.js";import"./VPagination-3n6UBKF_.js";import"./VTable-2kho1lTo.js";import"./filter-DF6NMxOv.js";const oe={class:"text-center pb-6"},se={class:"text-h4 mb-2"},ie={__name:"CategorieDeleteDialog",props:{isDialogVisible:{type:Boolean,required:!0},categorieSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","deleteCategorie"],setup(T,{emit:S}){const c=T,b=S,i=r(null),s=r(null),m=r(null),f=async()=>{i.value=null,s.value=null,m.value=null;try{const C=await N("categories/"+c.categorieSelected.id,{method:"DELETE",onResponseError({response:I}){s.value=I._data.error}});console.log(C),b("deleteCategorie",c.categorieSelected),n()}catch(C){console.log(C)}};M(()=>{console.log(c.categorieSelected)});const n=()=>{b("update:isDialogVisible",!1)},p=C=>{b("update:isDialogVisible",C)};return(C,I)=>{const k=L;return g(),_(z,{"max-width":"650","model-value":c.isDialogVisible,"onUpdate:modelValue":p},{default:e(()=>[l(F,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(k,{variant:"text",size:"default",onClick:n}),l(B,{class:"pt-5"},{default:e(()=>[E("div",oe,[E("h4",se," Delete Categorie : "+x(c.categorieSelected.id),1)]),l(P,{class:"mt-4",onSubmit:G(f,["prevent"])},{default:e(()=>[l(O,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[E("p",null,"Â¿Estas seguro de eliminar esta CATEGORIA : "+x(c.categorieSelected.title)+"?",1)]),_:1}),o(i)?(g(),_(d,{key:0,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[v(x(o(i)),1)]),_:1})]),_:1})):D("",!0),o(s)?(g(),_(d,{key:1,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[v(x(o(s)),1)]),_:1})]),_:1})):D("",!0),o(m)?(g(),_(d,{key:2,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[v(x(o(m)),1)]),_:1})]),_:1})):D("",!0),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(R,{type:"submit",color:"error"},{default:e(()=>[v(" Eliminar ")]),_:1}),l(R,{color:"secondary",variant:"outlined",onClick:n},{default:e(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},re={class:"text-center pb-6"},ne={class:"text-h4 mb-2"},ue={__name:"CategorieEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},categorieSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","editCategorie"],setup(T,{emit:S}){const c=T,b=S,i=r(null),s=r(null),m=r(null),f=r(1),n=r(null),p=r(null),C=r(null),I=async()=>{if(n.value=null,p.value=null,C.value=null,!i.value){setTimeout(()=>{n.value="Se debe llenar un nombre para la categoria"},50);return}let t=new FormData;t.append("title",i.value),s.value&&t.append("image",s.value),t.append("state",f.value);try{const a=await N("categories/"+c.categorieSelected.id,{method:"POST",body:t,onResponseError({response:V}){p.value=V._data.error}});console.log(a),a.message==403?p.value=a.message_text:(C.value="La categoria se ha editado correctamente",b("editCategorie",a.categorie),s.value="",n.value=null,p.value=null)}catch(a){console.log(a)}},k=t=>{if(t.target.files[0].type.indexOf("image")<0){p.value="SOLAMENTE PUEDEN SER ARCHIVOS DE TIPO IMAGEN";return}p.value="",s.value=t.target.files[0];let a=new FileReader;a.readAsDataURL(s.value),a.onloadend=()=>m.value=a.result},U=()=>{b("update:isDialogVisible",!1)},y=t=>{b("update:isDialogVisible",t)};return M(()=>{i.value=c.categorieSelected.title,f.value=c.categorieSelected.state,m.value=c.categorieSelected.imagen}),(t,a)=>{const V=L;return g(),_(z,{"max-width":"650","model-value":c.isDialogVisible,"onUpdate:modelValue":y},{default:e(()=>[l(F,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(V,{variant:"text",size:"default",onClick:U}),l(B,{class:"pt-5"},{default:e(()=>[E("div",re,[E("h4",ne," Edit Categorie : "+x(c.categorieSelected.title),1)]),l(P,{class:"mt-4",onSubmit:G(I,["prevent"])},{default:e(()=>[l(O,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[l(j,{modelValue:o(i),"onUpdate:modelValue":a[0]||(a[0]=h=>w(i)?i.value=h:null),label:"Nombre",placeholder:"Example: Memory"},null,8,["modelValue"])]),_:1}),o(n)?(g(),_(d,{key:0,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[v(x(o(n)),1)]),_:1})]),_:1})):D("",!0),o(p)?(g(),_(d,{key:1,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[v(x(o(p)),1)]),_:1})]),_:1})):D("",!0),o(C)?(g(),_(d,{key:2,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[v(x(o(C)),1)]),_:1})]),_:1})):D("",!0),l(d,{cols:"6"},{default:e(()=>[l(H,{label:"Imagen",onChange:a[1]||(a[1]=h=>k(h))}),o(m)?(g(),_(q,{key:0,width:"250",height:"176",src:o(m)},null,8,["src"])):D("",!0)]),_:1}),l(d,{cols:"6"},{default:e(()=>[l(ee,{items:[{name:"Activo",id:1},{name:"Inactivo",id:2}],"item-title":"name","item-value":"id",modelValue:o(f),"onUpdate:modelValue":a[2]||(a[2]=h=>w(f)?f.value=h:null),label:"Estado",placeholder:"Select Item",eager:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(R,{type:"submit"},{default:e(()=>[v(" Editar ")]),_:1}),l(R,{color:"secondary",variant:"outlined",onClick:U},{default:e(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ce=E("div",{class:"text-center pb-6"},[E("h4",{class:"text-h4 mb-2"}," Add Categorie ")],-1),de={__name:"CategorieAddDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","addCategorie"],setup(T,{emit:S}){const c=T,b=S,i=r(null),s=r(null),m=r(null),f=r(null),n=r(null),p=r(null),C=async()=>{if(f.value=null,n.value=null,p.value=null,!i.value){setTimeout(()=>{f.value="Se debe llenar un nombre para la categoria"},50);return}if(!s.value){setTimeout(()=>{f.value="Se debe subir una imagen para la categoria"},50);return}let y=new FormData;y.append("title",i.value),y.append("image",s.value),y.append("state",1);try{const t=await N("categories",{method:"POST",body:y,onResponseError({response:a}){n.value=a._data.error}});console.log(t),t.message==403?n.value=t.message_text:(p.value="La categoria se ha registrado correctamente",b("addCategorie",t.categorie),i.value="",s.value="",m.value="",f.value=null,n.value=null,p.value=null,k())}catch(t){console.log(t)}},I=y=>{if(y.target.files[0].type.indexOf("image")<0){n.value="SOLAMENTE PUEDEN SER ARCHIVOS DE TIPO IMAGEN";return}n.value="",s.value=y.target.files[0];let t=new FileReader;t.readAsDataURL(s.value),t.onloadend=()=>m.value=t.result},k=()=>{b("update:isDialogVisible",!1)},U=y=>{b("update:isDialogVisible",y)};return(y,t)=>{const a=L;return g(),_(z,{"max-width":"650","model-value":c.isDialogVisible,"onUpdate:modelValue":U},{default:e(()=>[l(F,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(a,{variant:"text",size:"default",onClick:k}),l(B,{class:"pt-5"},{default:e(()=>[ce,l(P,{class:"mt-4",onSubmit:G(C,["prevent"])},{default:e(()=>[l(O,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[l(j,{modelValue:o(i),"onUpdate:modelValue":t[0]||(t[0]=V=>w(i)?i.value=V:null),label:"Nombre",placeholder:"Example: Admin"},null,8,["modelValue"])]),_:1}),o(f)?(g(),_(d,{key:0,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[v(x(o(f)),1)]),_:1})]),_:1})):D("",!0),o(n)?(g(),_(d,{key:1,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[v(x(o(n)),1)]),_:1})]),_:1})):D("",!0),o(p)?(g(),_(d,{key:2,cols:"12"},{default:e(()=>[l(A,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[v(x(o(p)),1)]),_:1})]),_:1})):D("",!0),l(d,{cols:"6"},{default:e(()=>[l(H,{label:"Imagen",onChange:t[1]||(t[1]=V=>I(V))}),o(m)?(g(),_(q,{key:0,width:"250",height:"176",src:o(m)},null,8,["src"])):D("",!0)]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(R,{type:"submit"},{default:e(()=>[v(" Guardar ")]),_:1}),l(R,{color:"secondary",variant:"outlined",onClick:k},{default:e(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},me={class:"text-h6"},pe={class:"d-flex align-center"},ge={class:"d-flex flex-column ms-3"},fe={class:"d-block font-weight-medium text-high-emphasis text-truncate"},_e={class:"d-flex gap-1"},qe={__name:"categories",setup(T){const S=[{title:"ID",key:"id"},{title:"Categoria",key:"name"},{title:"Estado",key:"state"},{title:"Fecha de registro",key:"created_at"},{title:"Acciones",key:"action"}],c=r(!1),b=r(!1),i=r(!1),s=r([]),m=r(null),f=r(null),n=r(null),p=async()=>{try{const t=await N("categories?search="+(m.value?m.value:""),{method:"GET",onResponseError({response:a}){console.log(a._data.error)}});console.log(t),s.value=t.categories}catch(t){console.log(t)}},C=t=>{console.log(t);let a=s.value;s.value=[],a.unshift(t),setTimeout(()=>{s.value=a},50)},I=t=>{console.log(t);let a=s.value;s.value=[];let V=a.findIndex(h=>h.id==t.id);V!=-1&&(a[V]=t),setTimeout(()=>{s.value=a},50)},k=t=>{console.log(t);let a=s.value;s.value=[];let V=a.findIndex(h=>h.id==t.id);V!=-1&&a.splice(V,1),setTimeout(()=>{s.value=a},50)},U=t=>{console.log(t),b.value=!0,f.value=t},y=t=>{i.value=!0,n.value=t};return M(()=>{p()}),(t,a)=>{const V=le,h=de,K=ue,X=ie;return g(),J("div",null,[l(F,{title:"ðŸŽ« Categorias"},{default:e(()=>[l(B,null,{default:e(()=>[l(O,{class:"justify-space-between"},{default:e(()=>[l(d,{cols:"3"},{default:e(()=>[l(j,{placeholder:"Buscar Categorias",density:"compact",class:"me-3",modelValue:o(m),"onUpdate:modelValue":a[0]||(a[0]=u=>w(m)?m.value=u:null),onKeyup:W(p,["enter"])},null,8,["modelValue"])]),_:1}),l(d,{cols:"2",class:"text-end"},{default:e(()=>[l(R,{onClick:a[1]||(a[1]=u=>c.value=!o(c))},{default:e(()=>[v(" Add Categorie "),l($,{end:"",icon:"ri-add-line"})]),_:1})]),_:1})]),_:1})]),_:1}),l(te,{headers:S,items:o(s),"items-per-page":5,class:"text-no-wrap"},{"item.id":e(({item:u})=>[E("span",me,x(u.id),1)]),"item.name":e(({item:u})=>[E("div",pe,[l(ae,{size:"32",color:u.imagen?"":"primary",class:Y(u.imagen?"":"v-avatar-light-bg primary--text"),variant:u.imagen?void 0:"tonal"},{default:e(()=>[l(q,{src:u.imagen},null,8,["src"])]),_:2},1032,["color","class","variant"]),E("div",ge,[E("span",fe,x(u.title),1)])])]),"item.state":e(({item:u})=>[u.state==1?(g(),_(Z,{key:0,color:"primary"},{default:e(()=>[v(" Activo ")]),_:1})):D("",!0),u.state==2?(g(),_(Z,{key:1,color:"error"},{default:e(()=>[v(" Inactivo ")]),_:1})):D("",!0)]),"item.action":e(({item:u})=>[E("div",_e,[l(V,{size:"small",onClick:Q=>U(u)},{default:e(()=>[l($,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),l(V,{size:"small",onClick:Q=>y(u)},{default:e(()=>[l($,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])]),_:1},8,["items"])]),_:1}),l(h,{isDialogVisible:o(c),"onUpdate:isDialogVisible":a[2]||(a[2]=u=>w(c)?c.value=u:null),onAddCategorie:C},null,8,["isDialogVisible"]),o(f)&&o(b)?(g(),_(K,{key:0,isDialogVisible:o(b),"onUpdate:isDialogVisible":a[3]||(a[3]=u=>w(b)?b.value=u:null),categorieSelected:o(f),onEditCategorie:I},null,8,["isDialogVisible","categorieSelected"])):D("",!0),o(n)&&o(i)?(g(),_(X,{key:1,isDialogVisible:o(i),"onUpdate:isDialogVisible":a[4]||(a[4]=u=>w(i)?i.value=u:null),categorieSelected:o(n),onDeleteCategorie:k},null,8,["isDialogVisible","categorieSelected"])):D("",!0)])}}};export{qe as default};
