import{i as oe}from"./constants-BXcKDdXi.js";import{r as i,o as ae,c as b,a as m,w as l,b as e,d,t as y,e as me,f as E,u as a,g as R,V as W,x as ee,L as ge,as as Se,at as ye,i as U,h as Z,k as Ie,l as ue,F as fe,j as be}from"./index-CTHS9Uo5.js";import{_ as ve}from"./DialogCloseBtn-CmFX9Z5g.js";import{$ as se}from"./api-DV6oDQ6t.js";import{V as de}from"./VCard-DCSOa-uS.js";import{V as re}from"./VCardText-DvHr5E0T.js";import{V as pe}from"./VForm-DutAvWyc.js";import{V as ie,a as s}from"./VRow-BhAPnYDA.js";import{V as K}from"./VAlert-DEc64QkE.js";import{V as _e}from"./VDialog-BCy7d4kf.js";import{R as Ce,P as De,D as Ee,_ as Ue,a as xe}from"./ClientFinalAddDialog-CQGcJxIr.js";import{V as X}from"./VTextField-ZaB3RHnj.js";import{V as j}from"./VSelect-I2Djs2tK.js";import{V as ke}from"./VTextarea-7f9Dtzos.js";import{V as Re,a as Ve}from"./VRadioGroup-DWlrjI4H.js";import{_ as Ae}from"./IconBtn-DXVljAVB.js";import{V as Ne}from"./VTable-2kho1lTo.js";import{V as ce}from"./VChip-C2kZ6mQo.js";import{V as $e}from"./VPagination-3n6UBKF_.js";import"./index-BYrzgnBV.js";import"./VAvatar-B74PEF1E.js";import"./VImg-DbUZi3rZ.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VOverlay-CQPilPWj.js";import"./VList-BeeB6M1u.js";import"./VDivider-D7LS911x.js";import"./VMenu-B-CF11VB.js";import"./VCheckboxBtn-Mk3d90yG.js";const Pe={class:"text-center pb-6"},we={class:"text-h4 mb-2"},he={__name:"ClientDeleteDialog",props:{isDialogVisible:{type:Boolean,required:!0},clientSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","deleteClient"],setup(le,{emit:Y}){const t=le,w=Y,C=i(null),D=i(null),f=i(null),k=async()=>{C.value=null,D.value=null,f.value=null;try{const V=await se("clients/"+t.clientSelected.id,{method:"DELETE",onResponseError({response:I}){D.value=I._data.error}});console.log(V),w("deleteClient",t.clientSelected),x()}catch(V){console.log(V)}};ae(()=>{console.log(t.clientSelected)});const x=()=>{w("update:isDialogVisible",!1)},T=V=>{w("update:isDialogVisible",V)};return(V,I)=>{const g=ve;return m(),b(_e,{"max-width":"650","model-value":t.isDialogVisible,"onUpdate:modelValue":T},{default:l(()=>[e(de,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(g,{variant:"text",size:"default",onClick:x}),e(re,{class:"pt-5"},{default:l(()=>[d("div",Pe,[d("h4",we," Delete Client : "+y(t.clientSelected.full_name),1)]),e(pe,{class:"mt-4",onSubmit:me(k,["prevent"])},{default:l(()=>[e(ie,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[d("p",null,"Â¿Estas seguro de eliminar este Cliente : "+y(t.clientSelected.full_name)+"?",1)]),_:1}),a(C)?(m(),b(s,{key:0,cols:"12"},{default:l(()=>[e(K,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[R(y(a(C)),1)]),_:1})]),_:1})):E("",!0),a(D)?(m(),b(s,{key:1,cols:"12"},{default:l(()=>[e(K,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[R(y(a(D)),1)]),_:1})]),_:1})):E("",!0),a(f)?(m(),b(s,{key:2,cols:"12"},{default:l(()=>[e(K,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[R(y(a(f)),1)]),_:1})]),_:1})):E("",!0),e(s,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(W,{type:"submit",color:"error"},{default:l(()=>[R(" Eliminar ")]),_:1}),e(W,{color:"secondary",variant:"outlined",onClick:x},{default:l(()=>[R(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Oe={class:"text-center pb-6"},Fe={class:"text-h4 mb-2"},Le=d("label",null,"Fecha de aniversario",-1),Be={class:"app-picker-field"},Me={__name:"ClientCompanyEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},clientSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","editClient"],setup(le,{emit:Y}){const t=le,w=Y,C=i(null),D=i(null),f=i(null),k=i("RUC"),x=i(null),T=i(null),V=i(2),I=i(null),g=i(null),S=i(null),h=i(null),$=i(null),P=i(null),O=i(null),H=i(1),v=Ce.map(_=>({..._,id:String(_.id)})),r=De.map(_=>({..._,id:String(_.id),department_id:String(_.department_id)})),A=Ee.map(_=>({..._,id:String(_.id),province_id:String(_.province_id)})),F=i([]),q=i([]),N=i(null),L=i(null),z=i(null),n=i(!1);async function B(){t.clientSelected&&(n.value=!1,C.value=t.clientSelected.full_name??null,D.value=t.clientSelected.email??null,f.value=t.clientSelected.phone??null,k.value=t.clientSelected.type_document??"RUC",x.value=t.clientSelected.n_document??null,T.value=t.clientSelected.address??null,I.value=t.clientSelected.birth_date??null,V.value=t.clientSelected.type_client??2,H.value=t.clientSelected.state??1,g.value=t.clientSelected.ubigeo_region!=null?String(t.clientSelected.ubigeo_region):null,F.value=g.value?r.filter(_=>_.department_id===g.value):[],S.value=t.clientSelected.ubigeo_provincia!=null?String(t.clientSelected.ubigeo_provincia):null,q.value=S.value?A.filter(_=>_.province_id===S.value):[],h.value=t.clientSelected.ubigeo_distrito!=null?String(t.clientSelected.ubigeo_distrito):null,await ye(),n.value=!0)}ae(B),ee(()=>t.isDialogVisible,_=>{_&&B()}),ee(g,_=>{const c=_!=null?String(_):null;S.value=null,h.value=null,q.value=[],F.value=c?r.filter(G=>G.department_id===c):[]}),ee(S,_=>{const c=_!=null?String(_):null;h.value=null,q.value=c?A.filter(G=>G.province_id===c):[]});const te=async()=>{if(N.value=L.value=z.value=null,!C.value)return N.value="Se debe llenar el nombre de la empresa";if(!f.value)return N.value="Se debe llenar el telÃ©fono de la empresa";if(!x.value)return N.value="Se debe llenar el N.Âº de documento de la empresa";if(!k.value)return N.value="Se debe seleccionar un tipo de documento";if(!g.value)return N.value="Se debe seleccionar una comunidad autÃ³noma";if(!S.value)return N.value="Se debe seleccionar una provincia";if(!h.value)return N.value="Se debe seleccionar un municipio";if(!T.value)return N.value="Se debe introducir una direcciÃ³n";const _=v.find(u=>u.id===g.value),c=r.find(u=>u.id===S.value),G=A.find(u=>u.id===h.value);$.value=_?_.name:null,P.value=c?c.name:null,O.value=G?G.name:null;const o={full_name:C.value,email:D.value,phone:f.value,type_document:k.value,n_document:x.value,address:T.value,birth_date:I.value,ubigeo_region:g.value!=null?Number(g.value):null,ubigeo_provincia:S.value!=null?Number(S.value):null,ubigeo_distrito:h.value!=null?Number(h.value):null,region:$.value,provincia:P.value,distrito:O.value,type_client:V.value,state:H.value};try{const u=await se(`clients/${t.clientSelected.id}`,{method:"PATCH",body:o,onResponseError({response:J}){var p;L.value=((p=J._data)==null?void 0:p.error)||"Error al guardar"}});u.message===403?L.value=u.message_text:(z.value="El cliente se ha editado correctamente",w("editClient",u.client),N.value=L.value=null)}catch(u){console.error(u),L.value="Error inesperado"}},Q=()=>w("update:isDialogVisible",!1),ne=_=>w("update:isDialogVisible",_);return(_,c)=>{const G=ve;return m(),b(_e,{"max-width":"650","model-value":t.isDialogVisible,"onUpdate:modelValue":ne},{default:l(()=>[e(de,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(G,{variant:"text",size:"default",onClick:Q}),e(re,{class:"pt-5"},{default:l(()=>[d("div",Oe,[d("h4",Fe,"Edit Client Company : "+y(t.clientSelected.id),1)]),e(pe,{class:"mt-4",onSubmit:me(te,["prevent"])},{default:l(()=>[e(ie,null,{default:l(()=>[e(s,{cols:"10"},{default:l(()=>[e(X,{modelValue:C.value,"onUpdate:modelValue":c[0]||(c[0]=o=>C.value=o),label:"Nombre de la Empresa"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(j,{items:[{id:2,name:"Cliente Empresa"}],"item-title":"name","item-value":"id",modelValue:V.value,"onUpdate:modelValue":c[1]||(c[1]=o=>V.value=o),label:"Tipo de cliente"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(X,{modelValue:D.value,"onUpdate:modelValue":c[2]||(c[2]=o=>D.value=o),label:"Correo"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(X,{modelValue:f.value,"onUpdate:modelValue":c[3]||(c[3]=o=>f.value=o),type:"number",label:"TelÃ©fono"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(j,{items:["RUC","RUC 20"],modelValue:k.value,"onUpdate:modelValue":c[4]||(c[4]=o=>k.value=o),label:"Tipo de documento",eager:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(X,{modelValue:x.value,"onUpdate:modelValue":c[5]||(c[5]=o=>x.value=o),type:"number",label:"N.Âº Documento"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[Le,d("div",Be,[ge(d("input",{type:"date",class:"flat-picker-custom-style flatpickr-input","onUpdate:modelValue":c[6]||(c[6]=o=>I.value=o)},null,512),[[Se,I.value]])])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(ke,{modelValue:T.value,"onUpdate:modelValue":c[7]||(c[7]=o=>T.value=o),label:"DirecciÃ³n"},null,8,["modelValue"])]),_:1}),e(s,{cols:"3"},{default:l(()=>[e(j,{items:[{name:"Activo",id:1},{name:"Inactivo",id:2}],"item-title":"name","item-value":"id",modelValue:H.value,"onUpdate:modelValue":c[8]||(c[8]=o=>H.value=o),label:"Estado",eager:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"4"},{default:l(()=>[n.value?(m(),b(j,{key:0,modelValue:g.value,"onUpdate:modelValue":c[9]||(c[9]=o=>g.value=o),items:a(v),"item-title":"name","item-value":"id",label:"Comunidad AutÃ³noma"},null,8,["modelValue","items"])):E("",!0)]),_:1}),e(s,{cols:"4"},{default:l(()=>[n.value?(m(),b(j,{key:`prov-${g.value??""}`,modelValue:S.value,"onUpdate:modelValue":c[10]||(c[10]=o=>S.value=o),items:F.value,"item-title":"name","item-value":"id",label:"Provincia"},null,8,["modelValue","items"])):E("",!0)]),_:1}),e(s,{cols:"4"},{default:l(()=>[n.value?(m(),b(j,{key:`mun-${S.value??""}`,modelValue:h.value,"onUpdate:modelValue":c[11]||(c[11]=o=>h.value=o),items:q.value,"item-title":"name","item-value":"id",label:"Municipio"},null,8,["modelValue","items"])):E("",!0)]),_:1}),N.value?(m(),b(s,{key:0,cols:"12"},{default:l(()=>[e(K,{closable:"",color:"warning"},{default:l(()=>[R(y(N.value),1)]),_:1})]),_:1})):E("",!0),L.value?(m(),b(s,{key:1,cols:"12"},{default:l(()=>[e(K,{closable:"",color:"error"},{default:l(()=>[R(y(L.value),1)]),_:1})]),_:1})):E("",!0),z.value?(m(),b(s,{key:2,cols:"12"},{default:l(()=>[e(K,{closable:"",color:"success"},{default:l(()=>[R(y(z.value),1)]),_:1})]),_:1})):E("",!0),e(s,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(W,{type:"submit"},{default:l(()=>[R("Editar")]),_:1}),e(W,{color:"secondary",variant:"outlined",onClick:Q},{default:l(()=>[R("Cancel")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},je={class:"text-center pb-6"},qe={class:"text-h4 mb-2"},ze=d("label",{for:""},"Fecha de nacimiento",-1),Ge={class:"app-picker-field"},Je={class:"v-input v-input--horizontal v-input--center-affix v-input--density-comfortable v-locale--is-ltr position-relative v-text-field"},Xe={class:"v-input__control"},He={class:"v-field v-field--center-affix v-field--variant-outlined v-theme--light v-locale--is-ltr"},Ke={class:"v-field__field"},Qe={class:"v-field__input"},We=d("div",{class:"v-field__outline text-primary"},[d("div",{class:"v-field__outline__start"}),d("div",{class:"v-field__outline__notch"},[d("label",{class:"v-label v-field- label v-field-label--floating","aria-hidden":"true",for:"input-8",style:{}},"Nombre")]),d("div",{class:"v-field__outline__end"})],-1),Ye={__name:"ClientFinalEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},clientSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","editClient"],setup(le,{emit:Y}){const t=le,w=Y,C=i(null),D=i(null),f=i(null),k=i("DNI"),x=i(null),T=i(null),V=i(null),I=i(null),g=i(1),S=i(null),h=i("M"),$=i(null),P=i(null),O=i(null),H=i(null),v=i(null),r=i(null),A=i(1),F=Ce.map(o=>({...o,id:String(o.id)})),q=De.map(o=>({...o,id:String(o.id),department_id:String(o.department_id)})),N=Ee.map(o=>({...o,id:String(o.id),province_id:String(o.province_id)})),L=i([]),z=i([]),n=i(null),B=i(null),te=i(null),Q=i(!1);async function ne(){t.clientSelected&&(Q.value=!1,V.value=t.clientSelected.name,I.value=t.clientSelected.surname,D.value=t.clientSelected.email,C.value=t.clientSelected.full_name,f.value=t.clientSelected.phone,k.value=t.clientSelected.type_document,x.value=t.clientSelected.n_document,T.value=t.clientSelected.address,S.value=t.clientSelected.birth_date,g.value=t.clientSelected.type_client,A.value=t.clientSelected.state,$.value=t.clientSelected.ubigeo_region!=null?String(t.clientSelected.ubigeo_region):null,L.value=$.value?q.filter(o=>o.department_id===$.value):[],P.value=t.clientSelected.ubigeo_provincia!=null?String(t.clientSelected.ubigeo_provincia):null,z.value=P.value?N.filter(o=>o.province_id===P.value):[],O.value=t.clientSelected.ubigeo_distrito!=null?String(t.clientSelected.ubigeo_distrito):null,await ye(),Q.value=!0)}ae(()=>{ne()}),ee(()=>t.isDialogVisible,o=>{o&&ne()});const _=async()=>{if(n.value=null,B.value=null,te.value=null,!V.value){setTimeout(()=>{n.value="Se debe llenar el nombre del cliente"},50);return}if(!I.value){setTimeout(()=>{n.value="Se debe llenar el apellido del cliente"},50);return}if(!f.value){setTimeout(()=>{n.value="Se debe llenar el telefono del cliente"},50);return}if(!x.value){setTimeout(()=>{n.value="Se debe llenar el nÂ° de document del cliente"},50);return}if(!k.value){setTimeout(()=>{n.value="Se debe un tipo de documento para el cliente"},50);return}if(!$.value){setTimeout(()=>{n.value="Se debe seleccionar una region para el cliente"},50);return}if(!P.value){setTimeout(()=>{n.value="Se debe seleccionar una provincia para el cliente"},50);return}if(!O.value){setTimeout(()=>{n.value="Se debe debe seleccionar un distrito para el cliente"},50);return}if(!T.value){setTimeout(()=>{n.value="Se debe debe una direcciÃ³n para el cliente"},50);return}let o=F.find(M=>M.id==$.value);o&&(H.value=o.name);let u=q.find(M=>M.id==P.value);u&&(v.value=u.name);let J=N.find(M=>M.id==O.value);J&&(r.value=J.name);let p={name:V.value,surname:I.value,full_name:V.value+" "+I.value,email:D.value,phone:f.value,type_document:k.value,n_document:x.value,address:T.value,birth_date:S.value,gender:h.value,ubigeo_region:$.value,ubigeo_provincia:P.value,ubigeo_distrito:O.value,region:H.value,provincia:v.value,distrito:r.value,type_client:g.value,state:A.value};try{const M=await se("clients/"+t.clientSelected.id,{method:"PATCH",body:p,onResponseError({response:Te}){B.value=Te._data.error}});console.log(M),M.message==403?B.value=M.message_text:(te.value="El cliente se ha editado correctamente",w("editClient",M.client),n.value=null,B.value=null)}catch(M){console.log(M)}};ae(()=>{console.log(F,q,N),V.value=t.clientSelected.name,I.value=t.clientSelected.surname,D.value=t.clientSelected.email,C.value=t.clientSelected.full_name,f.value=t.clientSelected.phone,k.value=t.clientSelected.type_document,x.value=t.clientSelected.n_document,T.value=t.clientSelected.address,S.value=t.clientSelected.birth_date,$.value=t.clientSelected.ubigeo_region,P.value=t.clientSelected.ubigeo_provincia,O.value=t.clientSelected.ubigeo_distrito,g.value=t.clientSelected.type_client,A.value=t.clientSelected.state}),ee($,o=>{const u=o!=null?String(o):null;P.value=null,O.value=null,z.value=[],L.value=u?q.filter(J=>J.department_id===u):[]}),ee(P,o=>{const u=o!=null?String(o):null;O.value=null,z.value=u?N.filter(J=>J.province_id===u):[]});const c=()=>{w("update:isDialogVisible",!1)},G=o=>{w("update:isDialogVisible",o)};return(o,u)=>{const J=ve;return m(),b(_e,{"max-width":"650","model-value":t.isDialogVisible,"onUpdate:modelValue":G},{default:l(()=>[e(de,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(J,{variant:"text",size:"default",onClick:c}),e(re,{class:"pt-5"},{default:l(()=>[d("div",je,[d("h4",qe," Edit Client Final : "+y(t.clientSelected.id),1)]),e(pe,{class:"mt-4",onSubmit:me(_,["prevent"])},{default:l(()=>[e(ie,null,{default:l(()=>[e(s,{cols:"6"},{default:l(()=>[e(X,{modelValue:a(V),"onUpdate:modelValue":u[0]||(u[0]=p=>U(V)?V.value=p:null),label:"Nombre del Cliente",placeholder:"Example: Jose"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(X,{modelValue:a(I),"onUpdate:modelValue":u[1]||(u[1]=p=>U(I)?I.value=p:null),label:"Apellido del Cliente",placeholder:"Example: Jose"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(j,{items:[{id:1,name:"Cliente Final"}],"item-title":"name","item-value":"id",placeholder:"Select",label:"Tipo de cliente",modelValue:a(g),"onUpdate:modelValue":u[2]||(u[2]=p=>U(g)?g.value=p:null)},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(X,{modelValue:a(D),"onUpdate:modelValue":u[3]||(u[3]=p=>U(D)?D.value=p:null),label:"Correo",placeholder:"Example: laravest@gmail.com"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(X,{modelValue:a(f),"onUpdate:modelValue":u[4]||(u[4]=p=>U(f)?f.value=p:null),type:"number",label:"Telefono",placeholder:"Example: 9999999"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(j,{items:["DNI","PASAPORTE","CARNET DE EXTRANJERIA","TARJETA MILITAR"],modelValue:a(k),"onUpdate:modelValue":u[5]||(u[5]=p=>U(k)?k.value=p:null),label:"Tipo de documento",placeholder:"Select Item",eager:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"5"},{default:l(()=>[e(X,{modelValue:a(x),"onUpdate:modelValue":u[6]||(u[6]=p=>U(x)?x.value=p:null),type:"number",label:"NÂ° Document",placeholder:"Example: 9999999"},null,8,["modelValue"])]),_:1}),e(s,{cols:"4"},{default:l(()=>[e(Re,{modelValue:a(h),"onUpdate:modelValue":u[7]||(u[7]=p=>U(h)?h.value=p:null)},{default:l(()=>[e(Ve,{label:"Masculino",value:"M"}),e(Ve,{label:"Femenino",value:"F"})]),_:1},8,["modelValue"])]),_:1}),e(s,{cols:"3"},{default:l(()=>[e(j,{items:[{name:"Activo",id:1},{name:"Inactivo",id:2}],"item-title":"name","item-value":"id",modelValue:a(A),"onUpdate:modelValue":u[8]||(u[8]=p=>U(A)?A.value=p:null),label:"Estado",placeholder:"Select Item",eager:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[ze,d("div",Ge,[d("div",Je,[d("div",Xe,[d("div",He,[d("div",Ke,[d("div",Qe,[ge(d("input",{type:"date",class:"flat-picker-custom-style flatpickr-input","onUpdate:modelValue":u[9]||(u[9]=p=>U(S)?S.value=p:null),style:{opacity:"1"},id:""},null,512),[[Se,a(S)]])])]),We])])])])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(ke,{modelValue:a(T),"onUpdate:modelValue":u[10]||(u[10]=p=>U(T)?T.value=p:null),label:"DirecciÃ³n: ",placeholder:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"4"},{default:l(()=>[a(Q)?(m(),b(j,{key:0,modelValue:a($),"onUpdate:modelValue":u[11]||(u[11]=p=>U($)?$.value=p:null),items:a(F),"item-title":"name","item-value":"id",label:"Comunidad AutÃ³noma"},null,8,["modelValue","items"])):E("",!0)]),_:1}),e(s,{cols:"4"},{default:l(()=>[a(Q)?(m(),b(j,{key:`prov-${a($)??""}`,modelValue:a(P),"onUpdate:modelValue":u[12]||(u[12]=p=>U(P)?P.value=p:null),items:a(L),"item-title":"name","item-value":"id",label:"Provincia"},null,8,["modelValue","items"])):E("",!0)]),_:1}),e(s,{cols:"4"},{default:l(()=>[a(Q)?(m(),b(j,{key:`mun-${a(P)??""}`,modelValue:a(O),"onUpdate:modelValue":u[13]||(u[13]=p=>U(O)?O.value=p:null),items:a(z),"item-title":"name","item-value":"id",label:"Municipio"},null,8,["modelValue","items"])):E("",!0)]),_:1}),a(n)?(m(),b(s,{key:0,cols:"12"},{default:l(()=>[e(K,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[R(y(a(n)),1)]),_:1})]),_:1})):E("",!0),a(B)?(m(),b(s,{key:1,cols:"12"},{default:l(()=>[e(K,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[R(y(a(B)),1)]),_:1})]),_:1})):E("",!0),a(te)?(m(),b(s,{key:2,cols:"12"},{default:l(()=>[e(K,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[R(y(a(te)),1)]),_:1})]),_:1})):E("",!0),e(s,{cols:"12"}),e(s,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(W,{type:"submit"},{default:l(()=>[R(" Editar ")]),_:1}),e(W,{color:"secondary",variant:"outlined",onClick:c},{default:l(()=>[R(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Ze={key:0},el={key:1},ll={key:2},tl=d("br",null,null,-1),al={class:"d-flex gap-1"},$l={__name:"list",setup(le){const Y=[{title:"ID",key:"id"},{title:"Nombre completo",key:"full_name"},{title:"Tipo de cliente",key:"type_client"},{title:"Documento",key:"n_document"},{title:"Correo electrÃ³nico",key:"email"},{title:"TelÃ©fono",key:"phone"},{title:"UbicaciÃ³n",key:"region"},{title:"Estado",key:"state"},{title:"Acciones",key:"action"}],t=i(!1),w=i(!1),C=i(!1),D=i(!1),f=i([]),k=i(1),x=i(0),T=i(null),V=i(null),I=i(null),g=i(null),S=async()=>{try{const v=await se(`clients?page=${k.value}&search=${T.value?T.value:""}`,{method:"GET",onResponseError({response:r}){console.log(r._data.error)}});f.value=v.clients.data,x.value=v.total_page}catch(v){console.log(v)}},h=v=>{const r=f.value;f.value=[],r.unshift(v),setTimeout(()=>{f.value=r},50)},$=v=>{const r=f.value;f.value=[];const A=r.findIndex(F=>F.id==v.id);A!==-1&&(r[A]=v),setTimeout(()=>{f.value=r},50)},P=v=>{const r=f.value;f.value=[];const A=r.findIndex(F=>F.id==v.id);A!==-1&&r.splice(A,1),setTimeout(()=>{f.value=r},50)},O=v=>{C.value=!0,v.type_client==1?(V.value=v,I.value=null):(I.value=v,V.value=null)},H=v=>{D.value=!0,g.value=v};return ae(()=>{S()}),ee(k,()=>{S()}),(v,r)=>{const A=Ae,F=Ue,q=xe,N=Ye,L=Me,z=he;return m(),Z("div",null,[e(de,{title:"ðŸ’â€â™‚ï¸ Clientes"},{default:l(()=>[e(re,null,{default:l(()=>[e(ie,{class:"justify-space-between"},{default:l(()=>[e(s,{cols:"3"},{default:l(()=>[e(X,{modelValue:a(T),"onUpdate:modelValue":r[0]||(r[0]=n=>U(T)?T.value=n:null),placeholder:"Buscar clientes (pulsa Enter)",density:"compact",class:"me-3",onKeyup:Ie(S,["enter"])},null,8,["modelValue"])]),_:1}),e(s,{cols:"4"},{default:l(()=>[e(ie,null,{default:l(()=>[e(s,{cols:"6",class:"text-end"},{default:l(()=>[("isPermission"in v?v.isPermission:a(oe))("register_client")?(m(),b(W,{key:0,onClick:r[1]||(r[1]=n=>t.value=!a(t))},{default:l(()=>[R(" AÃ±adir cliente final "),e(ue,{end:"",icon:"ri-add-line"})]),_:1})):E("",!0)]),_:1}),e(s,{cols:"6",class:"text-end"},{default:l(()=>[("isPermission"in v?v.isPermission:a(oe))("register_client")?(m(),b(W,{key:0,onClick:r[2]||(r[2]=n=>w.value=!a(w))},{default:l(()=>[R(" AÃ±adir cliente empresa "),e(ue,{end:"",icon:"ri-add-line"})]),_:1})):E("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Ne,null,{default:l(()=>[d("thead",null,[d("tr",null,[(m(),Z(fe,null,be(Y,(n,B)=>d("th",{key:B,class:"text-uppercase"},y(n.title),1)),64))])]),d("tbody",null,[(m(!0),Z(fe,null,be(a(f),n=>(m(),Z("tr",{key:n.id},[d("td",null,y(n.id),1),d("td",null,y(n.full_name),1),d("td",null,[n.type_client==1?(m(),Z("span",Ze,"Cliente final")):n.type_client==2?(m(),Z("span",el,"Cliente empresa")):(m(),Z("span",ll,"â€”"))]),d("td",null,[d("span",null,y(n.type_document),1),tl,d("span",null,y(n.n_document),1)]),d("td",null,y(n.email),1),d("td",null,y(n.phone),1),d("td",null,y(n.region)+" / "+y(n.provincia)+" / "+y(n.distrito),1),d("td",null,[n.state==1?(m(),b(ce,{key:0,color:"primary"},{default:l(()=>[R("Activo")]),_:1})):n.state==2?(m(),b(ce,{key:1,color:"error"},{default:l(()=>[R("Inactivo")]),_:1})):(m(),b(ce,{key:2},{default:l(()=>[R("â€”")]),_:1}))]),d("td",null,[d("div",al,[("isPermission"in v?v.isPermission:a(oe))("edit_client")?(m(),b(A,{key:0,size:"small",onClick:B=>O(n),title:"Editar cliente"},{default:l(()=>[e(ue,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"])):E("",!0),("isPermission"in v?v.isPermission:a(oe))("delete_client")?(m(),b(A,{key:1,size:"small",onClick:B=>H(n),title:"Eliminar cliente"},{default:l(()=>[e(ue,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])):E("",!0)])])]))),128))])]),_:1}),e($e,{modelValue:a(k),"onUpdate:modelValue":r[3]||(r[3]=n=>U(k)?k.value=n:null),length:a(x)},null,8,["modelValue","length"])]),_:1}),e(F,{isDialogVisible:a(t),"onUpdate:isDialogVisible":r[4]||(r[4]=n=>U(t)?t.value=n:null),onAddClient:h},null,8,["isDialogVisible"]),e(q,{isDialogVisible:a(w),"onUpdate:isDialogVisible":r[5]||(r[5]=n=>U(w)?w.value=n:null),onAddClient:h},null,8,["isDialogVisible"]),a(V)&&a(C)?(m(),b(N,{key:0,isDialogVisible:a(C),"onUpdate:isDialogVisible":r[6]||(r[6]=n=>U(C)?C.value=n:null),clientSelected:a(V),onEditClient:$},null,8,["isDialogVisible","clientSelected"])):E("",!0),a(I)&&a(C)?(m(),b(L,{key:1,isDialogVisible:a(C),"onUpdate:isDialogVisible":r[7]||(r[7]=n=>U(C)?C.value=n:null),clientSelected:a(I),onEditClient:$},null,8,["isDialogVisible","clientSelected"])):E("",!0),a(g)&&a(D)?(m(),b(z,{key:2,isDialogVisible:a(D),"onUpdate:isDialogVisible":r[8]||(r[8]=n=>U(D)?D.value=n:null),clientSelected:a(g),onDeleteClient:P},null,8,["isDialogVisible","clientSelected"])):E("",!0)])}}};export{$l as default};
