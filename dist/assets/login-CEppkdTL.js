import{ai as T,h as V,a as d,F as B,j as M,b as e,w as o,l as F,u as t,V as D,r as g,q as P,s as $,n as q,d as l,J as h,t as k,g as u,e as z,c as v,f as x,at as A}from"./index-CTHS9Uo5.js";import{u as y}from"./useGenerateImageVariant-BWOa-h1c.js";import{V as G}from"./VNodeRenderer-BNM1zeEv.js";import{$ as J}from"./api-DV6oDQ6t.js";import{a as n,V as b}from"./VRow-BhAPnYDA.js";import{V as O}from"./VImg-DbUZi3rZ.js";import{V as U}from"./VCard-DCSOa-uS.js";import{V as I}from"./VCardText-DvHr5E0T.js";import{V as X}from"./VForm-DutAvWyc.js";import{V as w}from"./VTextField-ZaB3RHnj.js";import{V as C}from"./VAlert-DEc64QkE.js";import{V as L}from"./VDivider-D7LS911x.js";import"./index-BYrzgnBV.js";/* empty css              */import"./VAvatar-B74PEF1E.js";import"./forwardRefs-DWGaNmQL.js";const Z={class:"d-flex justify-center flex-wrap gap-2"},W={__name:"AuthProvider",setup(R){const{global:s}=T(),i=[{icon:"bxl-facebook",color:"#497CE2",colorInDark:"#497CE2"},{icon:"bxl-twitter",color:"#1da1f2",colorInDark:"#1da1f2"},{icon:"bxl-github",color:"#272727",colorInDark:"#fff"},{icon:"bxl-google",color:"#db4437",colorInDark:"#db4437"}];return(m,_)=>(d(),V("div",Z,[(d(),V(B,null,M(i,r=>e(D,{key:r.icon,icon:"",variant:"text",size:"small",color:t(s).name.value==="dark"?r.colorInDark:r.color},{default:o(()=>[e(F,{icon:r.icon},null,8,["icon"])]),_:2},1032,["color"])),64))]))}},H="/assets/auth-v2-login-illustration-bordered-dark-B4VltM7_.png",K="/assets/auth-v2-login-illustration-light-Cs2jXj00.png",Q="/assets/auth-v2-login-illustration-dark-CkFVS8nV.png",Y="/assets/auth-v2-login-illustration-light-Cs2jXj00.png",ee="/assets/auth-v2-login-mask-dark-CmZEWRGb.png",oe="/assets/auth-v2-login-mask-light-B5zETsZk.png",te={class:"app-logo auth-logo"},ae={class:"app-logo-title"},se={class:"d-flex align-center justify-center pa-10"},le=["src"],re={class:"text-h4 mb-1"},ne={class:"text-capitalize"},ie=l("p",{class:"mb-0"}," Inicia sesiÃ³n con tus credenciales para continuar. ",-1),ce=l("span",{class:"mx-4 text-high-emphasis"},"o",-1),Ce={__name:"login",setup(R){const s=g({email:"",password:"",remember:!1}),i=g(null),m=g(null),_=P(),r=$(),j=async()=>{try{i.value=null,m.value=null;const c=await J("auth/login",{method:"POST",body:{email:s.value.email,password:s.value.password},onResponseError({response:a}){console.log(a),i.value=a._data.error}});localStorage.setItem("token",c.access_token),localStorage.setItem("user",JSON.stringify(c.user)),m.value=1,await A(()=>{r.replace(_.query.to?String(_.query.to):"/")})}catch(c){console.log(c)}},p=g(!1),S=y(oe,ee),E=y(Y,Q,K,H,!0);return(c,a)=>{const N=q("RouterLink");return d(),V(B,null,[e(N,{to:"/"},{default:o(()=>[l("div",te,[e(t(G),{nodes:t(h).app.logo},null,8,["nodes"]),l("h1",ae,k(t(h).app.title),1)])]),_:1}),e(b,{"no-gutters":"",class:"auth-wrapper"},{default:o(()=>[e(n,{md:"8",class:"d-none d-md-flex align-center justify-center position-relative"},{default:o(()=>[l("div",se,[l("img",{src:t(E),class:"auth-illustration w-100",alt:"IlustraciÃ³n de inicio de sesiÃ³n"},null,8,le)]),e(O,{src:t(S),class:"d-none d-md-flex auth-footer-mask",alt:"MÃ¡scara de fondo"},null,8,["src"])]),_:1}),e(n,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[e(U,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-5 pa-lg-7"},{default:o(()=>[e(I,null,{default:o(()=>[l("h4",re,[u(" Â¡Bienvenido a CiscarERP "),l("span",ne,k(t(h).app.title)+"!",1),u(" ðŸ‘‹ðŸ» ")]),ie]),_:1}),e(I,null,{default:o(()=>[e(X,{onSubmit:z(j,["prevent"])},{default:o(()=>[e(b,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[e(w,{modelValue:t(s).email,"onUpdate:modelValue":a[0]||(a[0]=f=>t(s).email=f),autofocus:"",label:"Correo electrÃ³nico",type:"email",placeholder:"usuario@correo.com"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12"},{default:o(()=>[e(w,{modelValue:t(s).password,"onUpdate:modelValue":a[1]||(a[1]=f=>t(s).password=f),label:"ContraseÃ±a",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",type:t(p)?"text":"password","append-inner-icon":t(p)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[2]||(a[2]=f=>p.value=!t(p))},null,8,["modelValue","type","append-inner-icon"]),t(i)?(d(),v(C,{key:0,class:"my-2",type:"error",closable:""},{default:o(()=>[u(" No se pudo iniciar sesiÃ³n. Verifica tus credenciales e intÃ©ntalo de nuevo. ")]),_:1})):x("",!0),t(m)?(d(),v(C,{key:1,class:"my-2",type:"success",closable:""},{default:o(()=>[u(" Inicio de sesiÃ³n correcto. Redirigiendo... ")]),_:1})):x("",!0),e(D,{class:"my-2",block:"",type:"submit",color:"primary"},{default:o(()=>[u(" Iniciar sesiÃ³n ")]),_:1})]),_:1}),e(n,{cols:"12",class:"d-flex align-center"},{default:o(()=>[e(L),ce,e(L)]),_:1}),e(n,{cols:"12",class:"text-center"},{default:o(()=>[e(W)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Ce as default};
