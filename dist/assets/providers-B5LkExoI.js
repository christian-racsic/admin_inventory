import{_ as j}from"./DialogCloseBtn-CmFX9Z5g.js";import{r,o as z,c as y,a as _,w as l,b as e,d as I,t as A,e as q,f as P,u as a,g as D,V as N,i as S,h as K,k as ee,l as G,C as le}from"./index-CTHS9Uo5.js";import{$ as B}from"./api-DV6oDQ6t.js";import{V as $}from"./VCard-DCSOa-uS.js";import{V as M}from"./VCardText-DvHr5E0T.js";import{V as Z}from"./VForm-DutAvWyc.js";import{V as L,a as n}from"./VRow-BhAPnYDA.js";import{V as U}from"./VAlert-DEc64QkE.js";import{V as H}from"./VDialog-BCy7d4kf.js";import{V as w}from"./VTextField-ZaB3RHnj.js";import{V as Q}from"./VFileInput-DcGlPz5e.js";import{V as J}from"./VImg-DbUZi3rZ.js";import{V as W}from"./VTextarea-7f9Dtzos.js";import{V as ae}from"./VSelect-I2Djs2tK.js";import{_ as oe}from"./IconBtn-DXVljAVB.js";import{V as te}from"./VDataTable-DUyQL6-2.js";import{V as X}from"./VChip-C2kZ6mQo.js";import{V as se}from"./VAvatar-B74PEF1E.js";import"./index-BYrzgnBV.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VOverlay-CQPilPWj.js";import"./VList-BeeB6M1u.js";import"./VDivider-D7LS911x.js";import"./VMenu-B-CF11VB.js";import"./VCheckboxBtn-Mk3d90yG.js";import"./VPagination-3n6UBKF_.js";import"./VTable-2kho1lTo.js";import"./filter-DF6NMxOv.js";const re={class:"text-center pb-6"},ie={class:"text-h4 mb-2"},ne={__name:"ProviderDeleteDialog",props:{isDialogVisible:{type:Boolean,required:!0},providerSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","deleteProvider"],setup(F,{emit:R}){const p=F,x=R,m=r(null),i=r(null),v=r(null),g=async()=>{m.value=null,i.value=null,v.value=null;try{const b=await B("providers/"+p.providerSelected.id,{method:"DELETE",onResponseError({response:E}){i.value=E._data.error}});console.log(b),x("deleteProvider",p.providerSelected),f()}catch(b){console.log(b)}};z(()=>{console.log(p.providerSelected)});const f=()=>{x("update:isDialogVisible",!1)},h=b=>{x("update:isDialogVisible",b)};return(b,E)=>{const V=j;return _(),y(H,{"max-width":"650","model-value":p.isDialogVisible,"onUpdate:modelValue":h},{default:l(()=>[e($,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(V,{variant:"text",size:"default",onClick:f}),e(M,{class:"pt-5"},{default:l(()=>[I("div",re,[I("h4",ie," Delete Provider : "+A(p.providerSelected.id),1)]),e(Z,{class:"mt-4",onSubmit:q(g,["prevent"])},{default:l(()=>[e(L,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[I("p",null,"Â¿Estas seguro de eliminar el PROVEEDOR : "+A(p.providerSelected.full_name)+"?",1)]),_:1}),a(m)?(_(),y(n,{key:0,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[D(A(a(m)),1)]),_:1})]),_:1})):P("",!0),a(i)?(_(),y(n,{key:1,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[D(A(a(i)),1)]),_:1})]),_:1})):P("",!0),a(v)?(_(),y(n,{key:2,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[D(A(a(v)),1)]),_:1})]),_:1})):P("",!0),e(n,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(N,{type:"submit",color:"error"},{default:l(()=>[D(" Eliminar ")]),_:1}),e(N,{color:"secondary",variant:"outlined",onClick:f},{default:l(()=>[D(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ue={class:"text-center pb-6"},de={class:"text-h4 mb-2"},ce={__name:"ProviderEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},providerSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","editProvider"],setup(F,{emit:R}){const p=F,x=R,m=r(null),i=r(null),v=r(null),g=r(null),f=r(null),h=r(1),b=r(null),E=r(null),V=r(null),C=r(null),T=r(null),O=async()=>{if(V.value=null,C.value=null,T.value=null,!m.value){setTimeout(()=>{V.value="Se debe llenar el nombre del provedor"},50);return}if(!v.value){setTimeout(()=>{V.value="Se debe llenar la telefono del provedor"},50);return}if(!g.value){setTimeout(()=>{V.value="Se debe llenar el ruc del proveedor"},50);return}let o=new FormData;o.append("full_name",m.value),i.value&&o.append("email",i.value),f.value&&o.append("address",f.value),o.append("phone",v.value),b.value&&o.append("image",b.value),o.append("state",1),o.append("ruc",g.value);try{const s=await B("providers/"+p.providerSelected.id,{method:"POST",body:o,onResponseError({response:k}){C.value=k._data.error}});console.log(s),s.message==403?C.value=s.message_text:(T.value="El proveedor se ha editado correctamente",x("editProvider",s.provider),b.value=null,V.value=null,C.value=null)}catch(s){console.log(s)}},u=o=>{if(o.target.files[0].type.indexOf("image")<0){C.value="SOLAMENTE PUEDEN SER ARCHIVOS DE TIPO IMAGEN";return}C.value="",b.value=o.target.files[0];let s=new FileReader;s.readAsDataURL(b.value),s.onloadend=()=>E.value=s.result},d=()=>{x("update:isDialogVisible",!1)},c=o=>{x("update:isDialogVisible",o)};return z(()=>{m.value=p.providerSelected.full_name,g.value=p.providerSelected.ruc,i.value=p.providerSelected.email,v.value=p.providerSelected.phone,f.value=p.providerSelected.address,E.value=p.providerSelected.imagen,h.value=p.providerSelected.state}),(o,s)=>{const k=j;return _(),y(H,{"max-width":"650","model-value":p.isDialogVisible,"onUpdate:modelValue":c},{default:l(()=>[e($,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(k,{variant:"text",size:"default",onClick:d}),e(M,{class:"pt-5"},{default:l(()=>[I("div",ue,[I("h4",de," Edit Provider: "+A(p.providerSelected.full_name),1)]),e(Z,{class:"mt-4",onSubmit:q(O,["prevent"])},{default:l(()=>[e(L,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(m),"onUpdate:modelValue":s[0]||(s[0]=t=>S(m)?m.value=t:null),label:"Nombre del Proveedor",placeholder:"Example: Jose"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(w,{modelValue:a(i),"onUpdate:modelValue":s[1]||(s[1]=t=>S(i)?i.value=t:null),label:"Correo",placeholder:"Example: laravest@gmail.com"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(w,{modelValue:a(v),"onUpdate:modelValue":s[2]||(s[2]=t=>S(v)?v.value=t:null),type:"number",label:"Telefono",placeholder:"Example: 9999999"},null,8,["modelValue"])]),_:1}),e(n,{cols:"8"},{default:l(()=>[e(w,{modelValue:a(g),"onUpdate:modelValue":s[3]||(s[3]=t=>S(g)?g.value=t:null),type:"number",label:"Ruc",placeholder:"Example: 9999999"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(Q,{label:"Imagen",onChange:s[4]||(s[4]=t=>u(t))}),a(E)?(_(),y(J,{key:0,width:"250",height:"176",src:a(E)},null,8,["src"])):P("",!0)]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(W,{modelValue:a(f),"onUpdate:modelValue":s[5]||(s[5]=t=>S(f)?f.value=t:null),label:"DirecciÃ³n: ",placeholder:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(ae,{items:[{name:"Activo",id:1},{name:"Inactivo",id:2}],"item-title":"name","item-value":"id",modelValue:a(h),"onUpdate:modelValue":s[6]||(s[6]=t=>S(h)?h.value=t:null),label:"Estado",placeholder:"Select Item",eager:""},null,8,["modelValue"])]),_:1}),a(V)?(_(),y(n,{key:0,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[D(A(a(V)),1)]),_:1})]),_:1})):P("",!0),a(C)?(_(),y(n,{key:1,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[D(A(a(C)),1)]),_:1})]),_:1})):P("",!0),a(T)?(_(),y(n,{key:2,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[D(A(a(T)),1)]),_:1})]),_:1})):P("",!0),e(n,{cols:"12"}),e(n,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(N,{type:"submit"},{default:l(()=>[D(" Editar ")]),_:1}),e(N,{color:"secondary",variant:"outlined",onClick:d},{default:l(()=>[D(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},pe=I("div",{class:"text-center pb-6"},[I("h4",{class:"text-h4 mb-2"}," Add Provider ")],-1),me={__name:"ProviderAddDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","addProvider"],setup(F,{emit:R}){const p=F,x=R,m=r(null),i=r(null),v=r(null),g=r(null),f=r(null),h=r(null),b=r(null),E=r(null),V=r(null),C=r(null),T=async()=>{if(E.value=null,V.value=null,C.value=null,!m.value){setTimeout(()=>{E.value="Se debe llenar el nombre del provedor"},50);return}if(!v.value){setTimeout(()=>{E.value="Se debe llenar la telefono del provedor"},50);return}if(!g.value){setTimeout(()=>{E.value="Se debe llenar el ruc del proveedor"},50);return}let c=new FormData;c.append("full_name",m.value),i.value&&c.append("email",i.value),f.value&&c.append("address",f.value),c.append("phone",v.value),h.value&&c.append("image",h.value),c.append("state",1),c.append("ruc",g.value);try{const o=await B("providers",{method:"POST",body:c,onResponseError({response:s}){V.value=s._data.error}});console.log(o),o.message==403?V.value=o.message_text:(C.value="El proveedor se ha registrado correctamente",x("addProvider",o.provider),m.value="",i.value="",v.value="",h.value=null,b.value=null,g.value="",f.value="",E.value=null,V.value=null,C.value=null,u())}catch(o){console.log(o)}},O=c=>{if(c.target.files[0].type.indexOf("image")<0){V.value="SOLAMENTE PUEDEN SER ARCHIVOS DE TIPO IMAGEN";return}V.value="",h.value=c.target.files[0];let o=new FileReader;o.readAsDataURL(h.value),o.onloadend=()=>b.value=o.result},u=()=>{x("update:isDialogVisible",!1)},d=c=>{x("update:isDialogVisible",c)};return(c,o)=>{const s=j;return _(),y(H,{"max-width":"650","model-value":p.isDialogVisible,"onUpdate:modelValue":d},{default:l(()=>[e($,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(s,{variant:"text",size:"default",onClick:u}),e(M,{class:"pt-5"},{default:l(()=>[pe,e(Z,{class:"mt-4",onSubmit:q(T,["prevent"])},{default:l(()=>[e(L,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(m),"onUpdate:modelValue":o[0]||(o[0]=k=>S(m)?m.value=k:null),label:"Nombre del Proveedor",placeholder:"Example: Jose"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(w,{modelValue:a(i),"onUpdate:modelValue":o[1]||(o[1]=k=>S(i)?i.value=k:null),label:"Correo",placeholder:"Example: laravest@gmail.com"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(w,{modelValue:a(v),"onUpdate:modelValue":o[2]||(o[2]=k=>S(v)?v.value=k:null),type:"number",label:"Telefono",placeholder:"Example: 9999999"},null,8,["modelValue"])]),_:1}),e(n,{cols:"8"},{default:l(()=>[e(w,{modelValue:a(g),"onUpdate:modelValue":o[3]||(o[3]=k=>S(g)?g.value=k:null),type:"number",label:"Ruc",placeholder:"Example: 9999999"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(Q,{label:"Imagen",onChange:o[4]||(o[4]=k=>O(k))}),a(b)?(_(),y(J,{key:0,width:"250",height:"176",src:a(b)},null,8,["src"])):P("",!0)]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(W,{modelValue:a(f),"onUpdate:modelValue":o[5]||(o[5]=k=>S(f)?f.value=k:null),label:"DirecciÃ³n: ",placeholder:""},null,8,["modelValue"])]),_:1}),a(E)?(_(),y(n,{key:0,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[D(A(a(E)),1)]),_:1})]),_:1})):P("",!0),a(V)?(_(),y(n,{key:1,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[D(A(a(V)),1)]),_:1})]),_:1})):P("",!0),a(C)?(_(),y(n,{key:2,cols:"12"},{default:l(()=>[e(U,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[D(A(a(C)),1)]),_:1})]),_:1})):P("",!0),e(n,{cols:"12"}),e(n,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(N,{type:"submit"},{default:l(()=>[D(" Guardar ")]),_:1}),e(N,{color:"secondary",variant:"outlined",onClick:u},{default:l(()=>[D(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ve={class:"text-h6"},fe={class:"d-flex align-center"},_e={key:1,class:"text-sm"},Ve={class:"d-flex flex-column ms-3"},ge={class:"d-block font-weight-medium text-high-emphasis text-truncate"},be={class:"d-flex gap-1"},Ke={__name:"providers",setup(F){const R=[{title:"ID",key:"id"},{title:"Nombre Completo",key:"full_name"},{title:"RUC",key:"ruc"},{title:"Email",key:"email"},{title:"Telefono",key:"phone"},{title:"Estado",key:"state"},{title:"Fecha de registro",key:"created_at"},{title:"Acciones",key:"action"}],p=r(!1),x=r(!1),m=r(!1),i=r([]),v=r(null),g=r(null),f=r(null),h=async()=>{try{const u=await B("providers?search="+(v.value?v.value:""),{method:"GET",onResponseError({response:d}){console.log(d._data.error)}});console.log(u),i.value=u.providers}catch(u){console.log(u)}},b=u=>{console.log(u);let d=i.value;i.value=[],d.unshift(u),setTimeout(()=>{i.value=d},50)},E=u=>{console.log(u);let d=i.value;i.value=[];let c=d.findIndex(o=>o.id==u.id);c!=-1&&(d[c]=u),setTimeout(()=>{i.value=d},50)},V=u=>{console.log(u);let d=i.value;i.value=[];let c=d.findIndex(o=>o.id==u.id);c!=-1&&d.splice(c,1),setTimeout(()=>{i.value=d},50)},C=u=>{console.log(u),x.value=!0,g.value=u},T=u=>{m.value=!0,f.value=u},O=u=>u?u.split(" ").map(c=>c.charAt(0).toUpperCase()).join(""):"";return z(()=>{h()}),(u,d)=>{const c=oe,o=me,s=ce,k=ne;return _(),K("div",null,[e($,{title:"ðŸ¤ Proveedores"},{default:l(()=>[e(M,null,{default:l(()=>[e(L,{class:"justify-space-between"},{default:l(()=>[e(n,{cols:"3"},{default:l(()=>[e(w,{placeholder:"Buscar Proveedores",density:"compact",class:"me-3",modelValue:a(v),"onUpdate:modelValue":d[0]||(d[0]=t=>S(v)?v.value=t:null),onKeyup:ee(h,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{cols:"2",class:"text-end"},{default:l(()=>[e(N,{onClick:d[1]||(d[1]=t=>p.value=!a(p))},{default:l(()=>[D(" AÃ±adir proveedores "),e(G,{end:"",icon:"ri-add-line"})]),_:1})]),_:1})]),_:1})]),_:1}),e(te,{headers:R,items:a(i),"items-per-page":5,class:"text-no-wrap"},{"item.id":l(({item:t})=>[I("span",ve,A(t.id),1)]),"item.full_name":l(({item:t})=>[I("div",fe,[e(se,{size:"32",color:t.imagen?"":"primary",class:le(t.imagen?"":"v-avatar-light-bg primary--text"),variant:t.imagen?void 0:"tonal"},{default:l(()=>[t.imagen?(_(),y(J,{key:0,src:t.imagen},null,8,["src"])):(_(),K("span",_e,A(O(t.full_name)),1))]),_:2},1032,["color","class","variant"]),I("div",Ve,[I("span",ge,A(t.full_name),1)])])]),"item.state":l(({item:t})=>[t.state==1?(_(),y(X,{key:0,color:"primary"},{default:l(()=>[D(" Activo ")]),_:1})):P("",!0),t.state==2?(_(),y(X,{key:1,color:"error"},{default:l(()=>[D(" Inactivo ")]),_:1})):P("",!0)]),"item.action":l(({item:t})=>[I("div",be,[e(c,{size:"small",onClick:Y=>C(t)},{default:l(()=>[e(G,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),e(c,{size:"small",onClick:Y=>T(t)},{default:l(()=>[e(G,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])]),_:1},8,["items"])]),_:1}),e(o,{isDialogVisible:a(p),"onUpdate:isDialogVisible":d[2]||(d[2]=t=>S(p)?p.value=t:null),onAddProvider:b},null,8,["isDialogVisible"]),a(g)&&a(x)?(_(),y(s,{key:0,isDialogVisible:a(x),"onUpdate:isDialogVisible":d[3]||(d[3]=t=>S(x)?x.value=t:null),providerSelected:a(g),onEditProvider:E},null,8,["isDialogVisible","providerSelected"])):P("",!0),a(f)&&a(m)?(_(),y(k,{key:1,isDialogVisible:a(m),"onUpdate:isDialogVisible":d[4]||(d[4]=t=>S(m)?m.value=t:null),providerSelected:a(f),onDeleteProvider:V},null,8,["isDialogVisible","providerSelected"])):P("",!0)])}}};export{Ke as default};
