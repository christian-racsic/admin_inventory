import{i as we}from"./constants-BXcKDdXi.js";import{r as n,o as pe,c as f,a as c,w as l,b as e,d as i,t as _,e as re,f as g,u as t,g as v,V as O,i as w,aJ as Be,aK as xe,aL as ze,q as Me,h as z,l as me,F as Ve,j as ye,Q as Fe,R as Ke}from"./index-C2VmLSsf.js";import{_ as fe}from"./DialogCloseBtn-CDkbfzzn.js";import{$ as F}from"./api-fBbxbWV9.js";import{V as q,a as Ye,d as Ge}from"./VCard-BsRs2Dbz.js";import{V as N}from"./VCardText-fQi82b2X.js";import{V as be}from"./VForm-CT43qB3J.js";import{V as M,a as r}from"./VRow-CKub-qAo.js";import{V as T}from"./VAlert-ku1xFGr_.js";import{V as ge}from"./VDialog-DJHst2CE.js";import{V as A}from"./VSelect-Ce3hOZLi.js";import{V as $,a as He}from"./VTextField-BvYPkTzd.js";import{_ as Ze}from"./IconBtn-DDZ12Udw.js";import{_ as Xe}from"./TiptapEditor-B-k7R7-k.js";import{_ as Je}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Qe}from"./VAvatar-CrWFUmzB.js";import{V as el}from"./VImg-BjZkJGgN.js";import{V as Se}from"./VTable-Rng3EBBw.js";import{V as he}from"./VChip-DLC_ftk3.js";import{V as ke}from"./VCheckbox-q5itUquS.js";import"./index-BYrzgnBV.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VOverlay-BuiK-fz4.js";import"./VList-C6VPgDKA.js";import"./VDivider-IUxUQjJr.js";import"./VMenu-Dk04Zlg9.js";import"./VCheckboxBtn-D1ZcYjYr.js";const ll={class:"text-center pb-6"},tl={class:"text-h4 mb-2"},al={__name:"WalletProductDeleteDialog",props:{isDialogVisible:{type:Boolean,required:!0},walletSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","deleteWallet"],setup(L,{emit:B}){const d=L,E=B,h=n(null),V=n(null),b=n(null),x=async()=>{h.value=null,V.value=null,b.value=null;try{const p=await F("product-wallet/"+d.walletSelected.id,{method:"DELETE",onResponseError({response:o}){V.value=o._data.error}});console.log(p),E("deleteWallet",d.walletSelected),D()}catch(p){console.log(p)}};pe(()=>{console.log(d.walletSelected)});const D=()=>{E("update:isDialogVisible",!1)},U=p=>{E("update:isDialogVisible",p)};return(p,o)=>{const S=fe;return c(),f(ge,{"max-width":"650","model-value":d.isDialogVisible,"onUpdate:modelValue":U},{default:l(()=>[e(q,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(S,{variant:"text",size:"default",onClick:D}),e(N,{class:"pt-5"},{default:l(()=>[i("div",ll,[i("h4",tl," Delete Product Wallet : "+_(d.walletSelected.id),1)]),e(be,{class:"mt-4",onSubmit:re(x,["prevent"])},{default:l(()=>[e(M,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[i("p",null,"¬øEstas seguro de eliminar el precio de este PRODUCTO : "+_(d.walletSelected.unit.name)+"?",1)]),_:1}),t(h)?(c(),f(r,{key:0,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[v(_(t(h)),1)]),_:1})]),_:1})):g("",!0),t(V)?(c(),f(r,{key:1,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[v(_(t(V)),1)]),_:1})]),_:1})):g("",!0),t(b)?(c(),f(r,{key:2,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[v(_(t(b)),1)]),_:1})]),_:1})):g("",!0),e(r,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(O,{type:"submit",color:"error"},{default:l(()=>[v(" Eliminar ")]),_:1}),e(O,{color:"secondary",variant:"outlined",onClick:D},{default:l(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ol={class:"text-center pb-6"},sl={class:"text-h4 mb-2"},ul={__name:"WalletProductEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},walletSelected:{type:Object,required:!0},sucursales:{type:Object,required:!0},units:{type:Object,required:!0},product_id:{type:String,required:!0}},emits:["update:isDialogVisible","editWalletProduct"],setup(L,{emit:B}){const d=L,E=B,h=n(null),V=n(null),b=n(0),x=n(0),D=n([]),U=n([]),p=n(null),o=n(null),S=n(null),ee=async()=>{if(p.value=null,o.value=null,S.value=null,!V.value){setTimeout(()=>{p.value="Necesitas seleccionar un unidad"},25);return}if(!x.value){setTimeout(()=>{p.value="Necesitas seleccionar un tipo de cliente"},25);return}if(b.value<=0){setTimeout(()=>{p.value="Necesitas ingresar un precio mayor a 0"},25);return}let P={product_id:d.product_id,sucursale_id:h.value,unit_id:V.value,price:b.value,type_client:x.value};try{const m=await F("product-wallet/"+d.walletSelected.id,{method:"PATCH",body:P,onResponseError({response:W}){o.value=W._data.error}});console.log(m),m.message==403?o.value=m.message_text:(S.value="El precio se ha editado correctamente",E("editWalletProduct",m.product_wallet),p.value=null,o.value=null)}catch(m){console.log(m)}},j=()=>{E("update:isDialogVisible",!1)},le=P=>{E("update:isDialogVisible",P)};return pe(()=>{h.value=d.walletSelected.sucursale_id,V.value=d.walletSelected.unit_id,b.value=d.walletSelected.price,x.value=d.walletSelected.type_client,D.value=d.sucursales,U.value=d.units}),(P,m)=>{const W=fe;return c(),f(ge,{"max-width":"650","model-value":d.isDialogVisible,"onUpdate:modelValue":le},{default:l(()=>[e(q,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(W,{variant:"text",size:"default",onClick:j}),e(N,{class:"pt-5"},{default:l(()=>[i("div",ol,[i("h4",sl," Edit Wallet Product : "+_(d.walletSelected.id),1)]),e(be,{class:"mt-4",onSubmit:re(ee,["prevent"])},{default:l(()=>[e(M,null,{default:l(()=>[e(r,{cols:"6",md:"6"},{default:l(()=>[e(A,{items:t(D),"item-title":"name","item-value":"id",placeholder:"Select",modelValue:t(h),"onUpdate:modelValue":m[0]||(m[0]=k=>w(h)?h.value=k:null),label:"Sucursales"},null,8,["items","modelValue"])]),_:1}),e(r,{cols:"6",md:"6"},{default:l(()=>[e(A,{items:t(U),"item-title":"name","item-value":"id",placeholder:"Select",modelValue:t(V),"onUpdate:modelValue":m[1]||(m[1]=k=>w(V)?V.value=k:null),label:"Unidades"},null,8,["items","modelValue"])]),_:1}),e(r,{cols:"6",md:"6"},{default:l(()=>[e(A,{items:[{id:1,name:"Cliente Final"},{id:2,name:"Cliente Empresa"}],"item-title":"name","item-value":"id",placeholder:"Select",label:"Tipo de cliente",modelValue:t(x),"onUpdate:modelValue":m[2]||(m[2]=k=>w(x)?x.value=k:null)},null,8,["modelValue"])]),_:1}),e(r,{cols:"6",md:"6"},{default:l(()=>[e($,{label:"Precio",type:"number",modelValue:t(b),"onUpdate:modelValue":m[3]||(m[3]=k=>w(b)?b.value=k:null),placeholder:""},null,8,["modelValue"])]),_:1}),t(p)?(c(),f(r,{key:0,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[v(_(t(p)),1)]),_:1})]),_:1})):g("",!0),t(o)?(c(),f(r,{key:1,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[v(_(t(o)),1)]),_:1})]),_:1})):g("",!0),t(S)?(c(),f(r,{key:2,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[v(_(t(S)),1)]),_:1})]),_:1})):g("",!0),e(r,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(O,{type:"submit"},{default:l(()=>[v(" Editar ")]),_:1}),e(O,{color:"secondary",variant:"outlined",onClick:j},{default:l(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},il={class:"text-center pb-6"},nl={class:"text-h4 mb-2"},rl={__name:"WarehouseProductDeleteDialog",props:{isDialogVisible:{type:Boolean,required:!0},warehouseSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","deleteWarehouse"],setup(L,{emit:B}){const d=L,E=B,h=n(null),V=n(null),b=n(null),x=async()=>{h.value=null,V.value=null,b.value=null;try{const p=await F("product-warehouse/"+d.warehouseSelected.id,{method:"DELETE",onResponseError({response:o}){V.value=o._data.error}});console.log(p),E("deleteWarehouse",d.warehouseSelected),D()}catch(p){console.log(p)}};pe(()=>{console.log(d.warehouseSelected)});const D=()=>{E("update:isDialogVisible",!1)},U=p=>{E("update:isDialogVisible",p)};return(p,o)=>{const S=fe;return c(),f(ge,{"max-width":"650","model-value":d.isDialogVisible,"onUpdate:modelValue":U},{default:l(()=>[e(q,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(S,{variant:"text",size:"default",onClick:D}),e(N,{class:"pt-5"},{default:l(()=>[i("div",il,[i("h4",nl," Delete Warehouse Product : "+_(d.warehouseSelected.id),1)]),e(be,{class:"mt-4",onSubmit:re(x,["prevent"])},{default:l(()=>[e(M,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[i("p",null,"¬øEstas seguro de eliminar esta EXISTENCIA DEL PRODUCTO : "+_(d.warehouseSelected.warehouse.name)+"?",1)]),_:1}),t(h)?(c(),f(r,{key:0,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[v(_(t(h)),1)]),_:1})]),_:1})):g("",!0),t(V)?(c(),f(r,{key:1,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[v(_(t(V)),1)]),_:1})]),_:1})):g("",!0),t(b)?(c(),f(r,{key:2,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[v(_(t(b)),1)]),_:1})]),_:1})):g("",!0),e(r,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(O,{type:"submit",color:"error"},{default:l(()=>[v(" Eliminar ")]),_:1}),e(O,{color:"secondary",variant:"outlined",onClick:D},{default:l(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},dl={class:"text-center pb-6"},cl={class:"text-h4 mb-2"},ml={__name:"WarehouseProductEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},warehouseSelected:{type:Object,required:!0},warehouses:{type:Object,required:!0},units:{type:Object,required:!0},product_id:{type:String,required:!0}},emits:["update:isDialogVisible","editWarehouseProduct"],setup(L,{emit:B}){const d=L,E=B,h=n(null),V=n(null),b=n(0),x=n(0),D=n([]),U=n([]),p=n(null),o=n(null),S=n(null),ee=async()=>{if(p.value=null,o.value=null,S.value=null,!h.value){setTimeout(()=>{p.value="Necesitas seleccionar un almac√©n"},25);return}if(!V.value){setTimeout(()=>{p.value="Necesitas seleccionar una unidad"},25);return}if(b.value<0){setTimeout(()=>{p.value="Necesitas ingresar un stock mayor a 0"},25);return}let P={product_id:d.product_id,warehouse_id:h.value,unit_id:V.value,stock:b.value,umbral:x.value};try{const m=await F("product-warehouse/"+d.warehouseSelected.id,{method:"PATCH",body:P,onResponseError({response:W}){o.value=W._data.error}});console.log(m),m.message==403?o.value=m.message_text:(S.value="La existencia se ha editado correctamente",E("editWarehouseProduct",m.product_warehouse),p.value=null,o.value=null)}catch(m){console.log(m)}},j=()=>{E("update:isDialogVisible",!1)},le=P=>{E("update:isDialogVisible",P)};return pe(()=>{h.value=d.warehouseSelected.warehouse_id,V.value=d.warehouseSelected.unit_id,b.value=d.warehouseSelected.stock,x.value=d.warehouseSelected.umbral,D.value=d.warehouses,U.value=d.units}),(P,m)=>{const W=fe;return c(),f(ge,{"max-width":"650","model-value":d.isDialogVisible,"onUpdate:modelValue":le},{default:l(()=>[e(q,{class:"pa-sm-11 pa-3"},{default:l(()=>[e(W,{variant:"text",size:"default",onClick:j}),e(N,{class:"pt-5"},{default:l(()=>[i("div",dl,[i("h4",cl," Edit Warehouse Product : "+_(d.warehouseSelected.id),1)]),e(be,{class:"mt-4",onSubmit:re(ee,["prevent"])},{default:l(()=>[e(M,null,{default:l(()=>[e(r,{cols:"6",md:"6"},{default:l(()=>[e(A,{items:t(D),"item-title":"name","item-value":"id",placeholder:"Select",modelValue:t(h),"onUpdate:modelValue":m[0]||(m[0]=k=>w(h)?h.value=k:null),label:"Almacenes"},null,8,["items","modelValue"])]),_:1}),e(r,{cols:"6",md:"6"},{default:l(()=>[e(A,{items:t(U),"item-title":"name","item-value":"id",placeholder:"Select",modelValue:t(V),"onUpdate:modelValue":m[1]||(m[1]=k=>w(V)?V.value=k:null),label:"Unidades"},null,8,["items","modelValue"])]),_:1}),e(r,{cols:"6",md:"6"},{default:l(()=>[e($,{label:"Stock",type:"number",modelValue:t(b),"onUpdate:modelValue":m[2]||(m[2]=k=>w(b)?b.value=k:null),placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"6",md:"6"},{default:l(()=>[e($,{label:"Stock m√≠nimo",type:"number",modelValue:t(x),"onUpdate:modelValue":m[3]||(m[3]=k=>w(x)?x.value=k:null),placeholder:""},null,8,["modelValue"])]),_:1}),t(p)?(c(),f(r,{key:0,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"warning"},{default:l(()=>[v(_(t(p)),1)]),_:1})]),_:1})):g("",!0),t(o)?(c(),f(r,{key:1,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"error"},{default:l(()=>[v(_(t(o)),1)]),_:1})]),_:1})):g("",!0),t(S)?(c(),f(r,{key:2,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Close Alert",color:"success"},{default:l(()=>[v(_(t(S)),1)]),_:1})]),_:1})):g("",!0),e(r,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:l(()=>[e(O,{type:"submit"},{default:l(()=>[v(" Editar ")]),_:1}),e(O,{color:"secondary",variant:"outlined",onClick:j},{default:l(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Q=L=>(Fe("data-v-71f94550"),L=L(),Ke(),L),pl={class:"d-flex flex-wrap justify-space-between gap-4 mb-6"},_l={class:"d-flex flex-column justify-center"},vl={class:"text-h4 mb-1"},fl=Q(()=>i("p",{class:"text-body-1 mb-0"},"Pedidos y cambios sobre este producto",-1)),bl=Q(()=>i("h6",{class:"text-h6 text-primary cursor-pointer"},"A√±adir multimedia desde URL",-1)),gl={class:"flex"},Vl={class:"w-full h-auto relative"},yl={key:0,class:"d-flex flex-column justify-center align-center gap-y-2 pa-12 border-dashed drop-zone"},hl=Q(()=>i("h4",{class:"text-h4 text-wrap"},"Arrastra y suelta tu imagen aqu√≠.",-1)),wl=Q(()=>i("span",{class:"text-disabled"},"o",-1)),xl={key:1,class:"d-flex justify-center align-center gap-3 pa-8 border-dashed drop-zone flex-wrap"},Sl={key:0,class:"mt-2"},kl={class:"clamp-text text-wrap"},Dl=Q(()=>i("thead",null,[i("tr",null,[i("th",{class:"text-uppercase"},"Almac√©n"),i("th",{class:"text-uppercase"},"Unidad"),i("th",{class:"text-uppercase"},"Stock"),i("th",{class:"text-uppercase"},"Stock m√≠nimo"),i("th",{class:"text-uppercase"},"Estado"),i("th",{class:"text-uppercase"},"Acci√≥n")])],-1)),Cl={class:"flex"},El=Q(()=>i("thead",null,[i("tr",null,[i("th",{class:"text-uppercase"},"Sucursal"),i("th",{class:"text-uppercase"},"Unidad"),i("th",{class:"text-uppercase"},"Tipo de cliente"),i("th",{class:"text-uppercase"},"Precio"),i("th",{class:"text-uppercase"},"Acci√≥n")])],-1)),Ul={class:"flex"},Tl={class:"d-flex flex-column gap-y-5"},Pl=Q(()=>i("p",{class:"my-0"},"¬øRegalo?",-1)),Il={class:"d-flex"},Al=Q(()=>i("p",{class:"my-0"},"¬øTiene descuento?",-1)),Wl={key:0,class:"ml-5"},Rl={class:"d-flex flex-column gap-y-5"},$l={__name:"[id]",setup(L){const B=n(),d=n([]),{open:E,onChange:h}=Be({accept:"image/*",multiple:!1});function V(u){u==null||u.forEach(a=>{if(a.type.slice(0,6)!=="image/"){alert("Solo se permiten im√°genes");return}d.value.push({file:a,url:xe(a).value??""})})}h(u=>{if(d.value.length===1){alert("Solo se permite una imagen");return}if(u)for(const a of u)d.value.push({file:a,url:xe(a).value??""})}),ze(B,V);const b=Me(),x=n([]),D=n([]),U=n([]),p=n([]),o=n({title:"",sku:"",price_general:0,price_company:0,description:"",product_categorie_id:"",is_gift:1,is_discount:1,max_discount:0,tax_selected:1,importe_iva:18,disponibilidad:1,state:1,warranty_day:30}),S=n(!1),ee=n(null),j=n(!1),le=n(null),P=n(!1),m=n(null),W=n(!1),k=n(null),C=n(null),K=n(null),Y=n(null),se=n(0),de=n(0),te=n(null),G=n(null),H=n(null),ue=n(0),Z=n([]),X=n([]),ae=n(null),oe=n(null),R=n(null),ie=n(null),_e=n(null),De=u=>{const a=Number(u??0);try{return new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(a)}catch{return`${a.toLocaleString("es-ES")} ‚Ç¨`}},Ce=async()=>{try{const u=await F("products/config",{method:"GET",onResponseError({response:a}){console.log(a._data.error)}});x.value=u.categories,D.value=u.sucursales,U.value=u.units,p.value=u.warehouses}catch(u){console.log(u)}},Ee=async()=>{if(ae.value=null,!K.value){setTimeout(()=>ae.value="Necesitas seleccionar un almac√©n",25);return}if(!Y.value){setTimeout(()=>ae.value="Necesitas seleccionar una unidad",25);return}if(se.value<=0){setTimeout(()=>ae.value="Necesitas ingresar un stock mayor a 0",25);return}if(Z.value.find(y=>y.warehouse_id==K.value&&y.unit_id==Y.value)){ae.value="Esta existencia ya existe, agrega una nueva";return}const a=p.value.find(y=>y.id==K.value),I=U.value.find(y=>y.id==Y.value),J={product_id:b.params.id,warehouse_id:K.value,warehouse:a,unit_id:Y.value,unit:I,stock:se.value,umbral:de.value};try{const y=await F("product-warehouse",{method:"POST",body:J,onResponseError({response:ce}){console.log(ce._data.error)}});Z.value.unshift(y.product_warehouse),setTimeout(()=>{K.value="",Y.value="",se.value=0,de.value=0},25)}catch(y){console.log(y)}},Ue=u=>{S.value=!0,ee.value=u},Te=u=>{const a=Z.value.findIndex(I=>I.id==u.id);a!=-1&&(Z.value[a]=u)},Pe=u=>{const a=Z.value.findIndex(I=>I.id==u.id);a!=-1&&Z.value.splice(a,1)},Ie=u=>{j.value=!0,le.value=u},Ae=async()=>{if(oe.value=null,!G.value){setTimeout(()=>oe.value="Necesitas seleccionar una unidad",25);return}if(!H.value){setTimeout(()=>oe.value="Necesitas seleccionar un tipo de cliente",25);return}if(ue.value<=0){setTimeout(()=>oe.value="Necesitas ingresar un precio mayor a 0",25);return}if(X.value.find(y=>y.sucursale_id==te.value&&y.unit_id==G.value&&y.type_client==H.value)){oe.value="Ya existe esta configuraci√≥n de precio, selecciona otra";return}const a=D.value.find(y=>y.id==te.value),I=U.value.find(y=>y.id==G.value),J={product_id:b.params.id,type_client:H.value,type_client_name:H.value==1?"Cliente final":"Cliente empresa",unit_id:G.value,unit:I,sucursale_id:te.value,sucursale:a,price:Number(ue.value)};try{const y=await F("product-wallet",{method:"POST",body:J,onResponseError({response:ce}){console.log(ce._data.error)}});X.value.unshift(y.product_wallet),setTimeout(()=>{H.value="",G.value="",te.value=null,ue.value=0},25)}catch(y){console.log(y)}},We=u=>{P.value=!0,m.value=u},Re=u=>{const a=X.value.findIndex(I=>I.id==u.id);a!=-1&&(X.value[a]=u)},$e=u=>{W.value=!0,k.value=u},Ne=u=>{const a=X.value.findIndex(I=>I.id==u.id);a!=-1&&X.value.splice(a,1)},Oe=async()=>{try{if(R.value=null,ie.value=null,_e.value=null,!o.value.title){setTimeout(()=>R.value="Es necesario ingresar un nombre",15);return}if(!o.value.sku){setTimeout(()=>R.value="Es necesario ingresar el SKU",15);return}if(!o.value.price_general){setTimeout(()=>R.value="Es necesario ingresar el precio general",15);return}if(!o.value.price_company){setTimeout(()=>R.value="Es necesario ingresar el precio de empresa",15);return}if(!o.value.description){setTimeout(()=>R.value="A√±ade una descripci√≥n",15);return}if(!o.value.product_categorie_id){setTimeout(()=>R.value="Selecciona una categor√≠a",15);return}if(o.value.importe_iva<0){setTimeout(()=>R.value="El IVA debe ser ‚â• 0",15);return}if(o.value.warranty_day<0){setTimeout(()=>R.value="La garant√≠a debe ser ‚â• 0 d√≠as",15);return}if(o.value.is_discount==2&&o.value.max_discount<=0){setTimeout(()=>R.value="Indica el % de descuento m√°ximo",15);return}const u=new FormData;u.append("title",o.value.title),u.append("sku",o.value.sku),u.append("price_general",o.value.price_general),u.append("price_company",o.value.price_company),u.append("description",o.value.description),u.append("product_categorie_id",o.value.product_categorie_id),d.value.length>0&&d.value[0].file&&u.append("image",d.value[0].file),u.append("is_gift",o.value.is_gift==!1?1:o.value.is_gift),u.append("is_discount",o.value.is_discount==!1?1:o.value.is_discount),o.value.is_discount==2&&u.append("max_discount",o.value.max_discount),u.append("tax_selected",o.value.tax_selected),u.append("importe_iva",o.value.importe_iva),u.append("warranty_day",o.value.warranty_day),u.append("disponibilidad",o.value.disponibilidad),u.append("state",o.value.state);const a=await F(`products/${b.params.id}`,{method:"POST",body:u,onResponseError({response:I}){ie.value=I._data.error}});a.message==403?ie.value=a.message_text:(_e.value="El producto se ha editado correctamente",R.value=null,ie.value=null)}catch(u){console.log(u)}},Le=async()=>{try{const u=await F(`products/${b.params.id}`,{method:"GET",onResponseError({response:a}){console.log(a._data.error)}});C.value=u.product,o.value.title=C.value.title,o.value.sku=C.value.sku,o.value.price_general=C.value.price_general,o.value.price_company=C.value.price_company,o.value.description=C.value.description,o.value.product_categorie_id=C.value.product_categorie_id,o.value.is_gift=C.value.is_gift+"",o.value.is_discount=C.value.is_discount+"",o.value.max_discount=C.value.max_discount,o.value.tax_selected=C.value.tax_selected,o.value.importe_iva=C.value.importe_iva,o.value.disponibilidad=C.value.disponibilidad,o.value.state=C.value.state,o.value.warranty_day=C.value.warranty_day,d.value.push({file:null,url:C.value.imagen}),Z.value=C.value.warehouses,X.value=C.value.wallets}catch(u){console.log(u)}};return pe(()=>{Ce(),Le()}),(u,a)=>{const I=Xe,J=Ze,y=ml,ce=rl,je=ul,qe=al;return c(),z("div",null,[i("div",pl,[i("div",_l,[i("h4",vl,"üíª Editar producto: "+_(t(b).params.id),1),fl])]),e(M,null,{default:l(()=>[e(r,{md:"8"},{default:l(()=>[e(q,{class:"mb-6",title:"Informaci√≥n del producto"},{default:l(()=>[e(N,null,{default:l(()=>[e(M,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[e($,{label:"Nombre del producto",modelValue:t(o).title,"onUpdate:modelValue":a[0]||(a[0]=s=>t(o).title=s),placeholder:"iPhone 14"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"4"},{default:l(()=>[e($,{label:"SKU",modelValue:t(o).sku,"onUpdate:modelValue":a[1]||(a[1]=s=>t(o).sku=s),placeholder:"FXSK123U"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"4"},{default:l(()=>[e($,{label:"Precio (Cliente final)",modelValue:t(o).price_general,"onUpdate:modelValue":a[2]||(a[2]=s=>t(o).price_general=s),modelModifiers:{number:!0},type:"number",inputmode:"decimal",step:"0.01",prefix:"‚Ç¨",placeholder:"50,00"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"4"},{default:l(()=>[e($,{label:"Precio (Cliente empresa)",modelValue:t(o).price_company,"onUpdate:modelValue":a[3]||(a[3]=s=>t(o).price_company=s),modelModifiers:{number:!0},type:"number",inputmode:"decimal",step:"0.01",prefix:"‚Ç¨",placeholder:"100,00"},null,8,["modelValue"])]),_:1}),e(r,null,{default:l(()=>[e(He,{class:"mb-1"},{default:l(()=>[v("Descripci√≥n")]),_:1}),e(I,{modelValue:t(o).description,"onUpdate:modelValue":a[4]||(a[4]=s=>t(o).description=s),class:"border rounded-lg"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(M,null,{default:l(()=>[t(R)?(c(),f(r,{key:0,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Cerrar alerta",color:"warning"},{default:l(()=>[v(_(t(R)),1)]),_:1})]),_:1})):g("",!0),t(ie)?(c(),f(r,{key:1,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Cerrar alerta",color:"error"},{default:l(()=>[v(_(t(ie)),1)]),_:1})]),_:1})):g("",!0),t(_e)?(c(),f(r,{key:2,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Cerrar alerta",color:"success"},{default:l(()=>[v(_(t(_e)),1)]),_:1})]),_:1})):g("",!0)]),_:1}),e(q,{class:"my-6"},{default:l(()=>[e(Ye,null,{title:l(()=>[v("Imagen del producto")]),append:l(()=>[bl]),_:1}),e(N,null,{default:l(()=>[i("div",gl,[i("div",Vl,[i("div",{ref_key:"dropZoneRef",ref:B,class:"cursor-pointer",onClick:a[6]||(a[6]=()=>t(E)())},[t(d).length===0?(c(),z("div",yl,[e(Qe,{variant:"tonal",color:"secondary",rounded:""},{default:l(()=>[e(me,{icon:"ri-upload-2-line"})]),_:1}),hl,wl,e(O,{variant:"outlined",size:"small"},{default:l(()=>[v("Seleccionar im√°genes")]),_:1})])):(c(),z("div",xl,[e(M,{class:"match-height w-100"},{default:l(()=>[(c(!0),z(Ve,null,ye(t(d),(s,ne)=>(c(),f(r,{key:ne,cols:"12",sm:"4"},{default:l(()=>[e(q,{ripple:!1},{default:l(()=>[e(N,{class:"d-flex flex-column",onClick:a[5]||(a[5]=re(()=>{},["stop"]))},{default:l(()=>[e(el,{src:s.url,width:"200px",height:"150px",class:"w-100 mx-auto"},null,8,["src"]),s.file?(c(),z("div",Sl,[i("span",kl,_(s.file.name),1),i("span",null,_(s.file.size/1e3)+" KB",1)])):g("",!0)]),_:2},1024),e(Ge,null,{default:l(()=>[e(O,{variant:"text",block:"",onClick:re(ve=>t(d).splice(ne,1),["stop"])},{default:l(()=>[v("Eliminar archivo")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]))],512)])])]),_:1})]),_:1}),("isPermission"in u?u.isPermission:t(we))("show_inventory_product")?(c(),f(q,{key:0,title:"Existencias",class:"mb-6"},{default:l(()=>[e(N,null,{default:l(()=>[e(M,null,{default:l(()=>[e(r,{cols:"3",md:"3"},{default:l(()=>[e(A,{items:t(p),"item-title":"name","item-value":"id",placeholder:"Seleccionar",modelValue:t(K),"onUpdate:modelValue":a[7]||(a[7]=s=>w(K)?K.value=s:null),label:"Almacenes"},null,8,["items","modelValue"])]),_:1}),e(r,{cols:"3",md:"3"},{default:l(()=>[e(A,{items:t(U),"item-title":"name","item-value":"id",placeholder:"Seleccionar",modelValue:t(Y),"onUpdate:modelValue":a[8]||(a[8]=s=>w(Y)?Y.value=s:null),label:"Unidades"},null,8,["items","modelValue"])]),_:1}),e(r,{cols:"3",md:"3"},{default:l(()=>[e($,{label:"Stock",type:"number",modelValue:t(se),"onUpdate:modelValue":a[9]||(a[9]=s=>w(se)?se.value=s:null)},null,8,["modelValue"])]),_:1}),e(r,{cols:"2",md:"2"},{default:l(()=>[e($,{label:"Stock m√≠nimo",type:"number",modelValue:t(de),"onUpdate:modelValue":a[10]||(a[10]=s=>w(de)?de.value=s:null)},null,8,["modelValue"])]),_:1}),e(r,{cols:"1",md:"1"},{default:l(()=>[e(O,{"prepend-icon":"ri-add-line",onClick:a[11]||(a[11]=s=>Ee())})]),_:1}),t(ae)?(c(),f(r,{key:0,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Cerrar alerta",color:"warning"},{default:l(()=>[v(_(t(ae)),1)]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(Se,null,{default:l(()=>[Dl,i("tbody",null,[(c(!0),z(Ve,null,ye(t(Z),(s,ne)=>(c(),z("tr",{key:ne},[i("td",null,_(s.warehouse.name),1),i("td",null,_(s.unit.name),1),i("td",null,_(s.stock),1),i("td",null,_(s.umbral),1),i("td",null,[s.state_stock==1?(c(),f(he,{key:0,color:"primary"},{default:l(()=>[v("DISPONIBLE")]),_:1})):g("",!0),s.state_stock==2?(c(),f(he,{key:1,color:"warning"},{default:l(()=>[v("POR AGOTAR")]),_:1})):g("",!0),s.state_stock==3?(c(),f(he,{key:2,color:"error"},{default:l(()=>[v("AGOTADO")]),_:1})):g("",!0)]),i("td",null,[i("div",Cl,[e(J,{size:"small",onClick:ve=>Ue(s)},{default:l(()=>[e(me,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),e(J,{size:"small",onClick:ve=>Ie(s)},{default:l(()=>[e(me,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])])]))),128))])]),_:1})]),_:1})]),_:1})):g("",!0),("isPermission"in u?u.isPermission:t(we))("show_wallet_price_product")?(c(),f(q,{key:1,title:"M√∫ltiples precios",class:"mb-6"},{default:l(()=>[e(N,null,{default:l(()=>[e(M,null,{default:l(()=>[e(r,{cols:"4",md:"3"},{default:l(()=>[e(A,{items:t(D),"item-title":"name","item-value":"id",placeholder:"Seleccionar",label:"Sucursales",modelValue:t(te),"onUpdate:modelValue":a[12]||(a[12]=s=>w(te)?te.value=s:null)},null,8,["items","modelValue"])]),_:1}),e(r,{cols:"4",md:"3"},{default:l(()=>[e(A,{items:t(U),"item-title":"name","item-value":"id",placeholder:"Seleccionar",label:"Unidades",modelValue:t(G),"onUpdate:modelValue":a[13]||(a[13]=s=>w(G)?G.value=s:null)},null,8,["items","modelValue"])]),_:1}),e(r,{cols:"4",md:"3"},{default:l(()=>[e(A,{items:[{id:1,name:"Cliente final"},{id:2,name:"Cliente empresa"}],"item-title":"name","item-value":"id",placeholder:"Seleccionar",label:"Tipo de cliente",modelValue:t(H),"onUpdate:modelValue":a[14]||(a[14]=s=>w(H)?H.value=s:null)},null,8,["modelValue"])]),_:1}),e(r,{cols:"3",md:"2"},{default:l(()=>[e($,{label:"Precio",type:"number",inputmode:"decimal",step:"0.01",prefix:"‚Ç¨",modelValue:t(ue),"onUpdate:modelValue":a[15]||(a[15]=s=>w(ue)?ue.value=s:null),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(r,{cols:"1",md:"1"},{default:l(()=>[e(O,{"prepend-icon":"ri-add-line",onClick:a[16]||(a[16]=s=>Ae())})]),_:1}),t(oe)?(c(),f(r,{key:0,cols:"12"},{default:l(()=>[e(T,{closable:"","close-label":"Cerrar alerta",color:"warning"},{default:l(()=>[v(_(t(oe)),1)]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(Se,null,{default:l(()=>[El,i("tbody",null,[(c(!0),z(Ve,null,ye(t(X),(s,ne)=>(c(),z("tr",{key:ne},[i("td",null,_(s.sucursale?s.sucursale.name:"---"),1),i("td",null,_(s.unit.name),1),i("td",null,_(s.type_client_name),1),i("td",null,_(De(s.price)),1),i("td",null,[i("div",Ul,[e(J,{size:"small",onClick:ve=>We(s)},{default:l(()=>[e(me,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),e(J,{size:"small",onClick:ve=>$e(s)},{default:l(()=>[e(me,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])])]))),128))])]),_:1})]),_:1})]),_:1})):g("",!0)]),_:1}),e(r,{md:"4",cols:"12"},{default:l(()=>[e(q,{title:"Adicionales"},{default:l(()=>[e(N,null,{default:l(()=>[i("div",Tl,[e(A,{placeholder:"Seleccionar",label:"Categor√≠a",items:t(x),"item-title":"name","item-value":"id",modelValue:t(o).product_categorie_id,"onUpdate:modelValue":a[17]||(a[17]=s=>t(o).product_categorie_id=s)},null,8,["items","modelValue"]),i("div",null,[Pl,e(ke,{label:"S√≠",value:"2",modelValue:t(o).is_gift,"onUpdate:modelValue":a[18]||(a[18]=s=>t(o).is_gift=s)},null,8,["modelValue"])]),i("div",Il,[i("div",null,[Al,e(ke,{label:"S√≠",value:"2",modelValue:t(o).is_discount,"onUpdate:modelValue":a[19]||(a[19]=s=>t(o).is_discount=s)},null,8,["modelValue"])]),t(o).is_discount==2?(c(),z("div",Wl,[e($,{label:"% de descuento m√°ximo",type:"number",modelValue:t(o).max_discount,"onUpdate:modelValue":a[20]||(a[20]=s=>t(o).max_discount=s),modelModifiers:{number:!0},placeholder:"18",suffix:"%"},null,8,["modelValue"])])):g("",!0)]),e($,{label:"D√≠as de garant√≠a",type:"number",modelValue:t(o).warranty_day,"onUpdate:modelValue":a[21]||(a[21]=s=>t(o).warranty_day=s),modelModifiers:{number:!0},placeholder:"30"},null,8,["modelValue"])])]),_:1})]),_:1}),e(q,{title:"Especificaciones",class:"my-5"},{default:l(()=>[e(N,null,{default:l(()=>[i("div",Rl,[e(A,{placeholder:"Seleccionar",label:"Tipo de impuesto",items:[{id:1,title:"Sujeto a impuesto"},{id:2,title:"Libre de impuesto"}],"item-title":"title","item-value":"id",modelValue:t(o).tax_selected,"onUpdate:modelValue":a[22]||(a[22]=s=>t(o).tax_selected=s)},null,8,["modelValue"]),e($,{label:"IVA",type:"number",modelValue:t(o).importe_iva,"onUpdate:modelValue":a[23]||(a[23]=s=>t(o).importe_iva=s),modelModifiers:{number:!0},placeholder:"21",suffix:"%"},null,8,["modelValue"]),e(A,{placeholder:"Seleccionar",label:"Disponibilidad",items:[{id:1,title:"Vender sin stock"},{id:2,title:"No vender sin stock"}],"item-title":"title","item-value":"id",modelValue:t(o).disponibilidad,"onUpdate:modelValue":a[24]||(a[24]=s=>t(o).disponibilidad=s)},null,8,["modelValue"]),e(A,{placeholder:"Seleccionar",label:"Estado",items:[{id:1,name:"Activo"},{id:2,name:"Inactivo"}],"item-title":"name","item-value":"id",modelValue:t(o).state,"onUpdate:modelValue":a[25]||(a[25]=s=>t(o).state=s)},null,8,["modelValue"])])]),_:1})]),_:1}),e(O,{block:"",onClick:Oe},{default:l(()=>[v("Editar producto")]),_:1})]),_:1})]),_:1}),t(ee)&&t(S)?(c(),f(y,{key:0,isDialogVisible:t(S),"onUpdate:isDialogVisible":a[26]||(a[26]=s=>w(S)?S.value=s:null),warehouseSelected:t(ee),warehouses:t(p),units:t(U),product_id:t(b).params.id,onEditWarehouseProduct:Te},null,8,["isDialogVisible","warehouseSelected","warehouses","units","product_id"])):g("",!0),t(le)&&t(j)?(c(),f(ce,{key:1,isDialogVisible:t(j),"onUpdate:isDialogVisible":a[27]||(a[27]=s=>w(j)?j.value=s:null),warehouseSelected:t(le),onDeleteWarehouse:Pe},null,8,["isDialogVisible","warehouseSelected"])):g("",!0),t(m)&&t(P)?(c(),f(je,{key:2,isDialogVisible:t(P),"onUpdate:isDialogVisible":a[28]||(a[28]=s=>w(P)?P.value=s:null),walletSelected:t(m),sucursales:t(D),units:t(U),product_id:t(b).params.id,onEditWalletProduct:Re},null,8,["isDialogVisible","walletSelected","sucursales","units","product_id"])):g("",!0),t(k)&&t(W)?(c(),f(qe,{key:3,isDialogVisible:t(W),"onUpdate:isDialogVisible":a[29]||(a[29]=s=>w(W)?W.value=s:null),walletSelected:t(k),onDeleteWallet:Ne},null,8,["isDialogVisible","walletSelected"])):g("",!0)])}}},ct=Je($l,[["__scopeId","data-v-71f94550"]]);export{ct as default};
