import{_ as q}from"./DialogCloseBtn-CDkbfzzn.js";import{r as n,o as z,c as g,a as b,w as e,b as l,d as E,t as S,e as L,f as x,u as a,g as v,V as U,i as h,h as Q,k as J,l as F}from"./index-C2VmLSsf.js";import{$ as I}from"./api-fBbxbWV9.js";import{V as R}from"./VCard-BsRs2Dbz.js";import{V as N}from"./VCardText-fQi82b2X.js";import{V as O}from"./VForm-CT43qB3J.js";import{V as j,a as d}from"./VRow-CKub-qAo.js";import{V as w}from"./VAlert-ku1xFGr_.js";import{V as G}from"./VDialog-DJHst2CE.js";import{V as K}from"./VTextField-BvYPkTzd.js";import{V as M}from"./VTextarea-x2-n2yy5.js";import{V as W}from"./VSelect-Ce3hOZLi.js";import{_ as Y}from"./IconBtn-DDZ12Udw.js";import{V as Z}from"./VDataTable-Bx5iP7r3.js";import"./index-BYrzgnBV.js";import"./VAvatar-CrWFUmzB.js";import"./VImg-BjZkJGgN.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VOverlay-BuiK-fz4.js";import"./VList-C6VPgDKA.js";import"./VDivider-IUxUQjJr.js";import"./VMenu-Dk04Zlg9.js";import"./VCheckboxBtn-D1ZcYjYr.js";import"./VChip-DLC_ftk3.js";import"./VPagination-BavTEBhF.js";import"./VTable-Rng3EBBw.js";import"./filter-BT5ZVbsJ.js";const ee={class:"text-center pb-6"},le={class:"text-h4 mb-2"},ae={__name:"SucursalDeleteDialog",props:{isDialogVisible:{type:Boolean,required:!0},sucursalSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","deleteSucursal"],setup($,{emit:T}){const i=$,_=T,u=n(null),s=n(null),r=n(null),m=async()=>{u.value=null,s.value=null,r.value=null;try{const V=await I("sucursales/"+i.sucursalSelected.id,{method:"DELETE",onResponseError({response:C}){s.value=C._data.error}});console.log(V),_("deleteSucursal",i.sucursalSelected),c()}catch(V){console.log(V)}};z(()=>{console.log(i.sucursalSelected)});const c=()=>{_("update:isDialogVisible",!1)},y=V=>{_("update:isDialogVisible",V)};return(V,C)=>{const k=q;return b(),g(G,{"max-width":"650","model-value":i.isDialogVisible,"onUpdate:modelValue":y},{default:e(()=>[l(R,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(k,{variant:"text",size:"default",onClick:c}),l(N,{class:"pt-5"},{default:e(()=>[E("div",ee,[E("h4",le," Delete Sucursal : "+S(i.sucursalSelected.id),1)]),l(O,{class:"mt-4",onSubmit:L(m,["prevent"])},{default:e(()=>[l(j,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[E("p",null,"驴Estas seguro de eliminar el SUCURSAL : "+S(i.sucursalSelected.name)+"?",1)]),_:1}),a(u)?(b(),g(d,{key:0,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[v(S(a(u)),1)]),_:1})]),_:1})):x("",!0),a(s)?(b(),g(d,{key:1,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[v(S(a(s)),1)]),_:1})]),_:1})):x("",!0),a(r)?(b(),g(d,{key:2,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[v(S(a(r)),1)]),_:1})]),_:1})):x("",!0),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(U,{type:"submit",color:"error"},{default:e(()=>[v(" Eliminar ")]),_:1}),l(U,{color:"secondary",variant:"outlined",onClick:c},{default:e(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},se={class:"text-center pb-6"},te={class:"text-h4 mb-2"},oe={__name:"SucursalEditDialog",props:{isDialogVisible:{type:Boolean,required:!0},sucursalSelected:{type:Object,required:!0}},emits:["update:isDialogVisible","editSucursal"],setup($,{emit:T}){const i=$,_=T,u=n(null),s=n(null),r=n(1),m=n(null),c=n(null),y=n(null),V=async()=>{if(m.value=null,c.value=null,y.value=null,!u.value){setTimeout(()=>{m.value="Se debe llenar el nombre de la sucursal"},50);return}if(!s.value){setTimeout(()=>{m.value="Se debe llenar la direcci贸n de la sucursal"},50);return}let f={name:u.value,address:s.value,state:r.value};try{const p=await I("sucursales/"+i.sucursalSelected.id,{method:"PATCH",body:f,onResponseError({response:o}){c.value=o._data.error}});console.log(p),p.message==403?c.value=p.message_text:(y.value="La sucursal se ha EDITADO correctamente",_("editSucursal",p.sucursal),m.value=null,c.value=null)}catch(p){console.log(p)}},C=()=>{_("update:isDialogVisible",!1)},k=f=>{_("update:isDialogVisible",f)};return z(()=>{u.value=i.sucursalSelected.name,s.value=i.sucursalSelected.address,r.value=i.sucursalSelected.state}),(f,p)=>{const o=q;return b(),g(G,{"max-width":"650","model-value":i.isDialogVisible,"onUpdate:modelValue":k},{default:e(()=>[l(R,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(o,{variant:"text",size:"default",onClick:C}),l(N,{class:"pt-5"},{default:e(()=>[E("div",se,[E("h4",te," Edit Sucursal : "+S(i.sucursalSelected.name),1)]),l(O,{class:"mt-4",onSubmit:L(V,["prevent"])},{default:e(()=>[l(j,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[l(K,{modelValue:a(u),"onUpdate:modelValue":p[0]||(p[0]=t=>h(u)?u.value=t:null),label:"Nombre",placeholder:"Example: Admin"},null,8,["modelValue"])]),_:1}),a(m)?(b(),g(d,{key:0,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[v(S(a(m)),1)]),_:1})]),_:1})):x("",!0),a(c)?(b(),g(d,{key:1,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[v(S(a(c)),1)]),_:1})]),_:1})):x("",!0),a(y)?(b(),g(d,{key:2,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[v(S(a(y)),1)]),_:1})]),_:1})):x("",!0),l(d,{cols:"12"},{default:e(()=>[l(M,{modelValue:a(s),"onUpdate:modelValue":p[1]||(p[1]=t=>h(s)?s.value=t:null),label:"Direcci贸n: ",placeholder:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"6"},{default:e(()=>[l(W,{items:[{name:"Activo",id:1},{name:"Inactivo",id:2}],"item-title":"name","item-value":"id",modelValue:a(r),"onUpdate:modelValue":p[2]||(p[2]=t=>h(r)?r.value=t:null),label:"Estado",placeholder:"Select Item",eager:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(U,{type:"submit"},{default:e(()=>[v(" Editar ")]),_:1}),l(U,{color:"secondary",variant:"outlined",onClick:C},{default:e(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ue=E("div",{class:"text-center pb-6"},[E("h4",{class:"text-h4 mb-2"}," Add Sucursal ")],-1),re={__name:"SucursalAddDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","addSucursal"],setup($,{emit:T}){const i=$,_=T,u=n(null),s=n(null),r=n(null),m=n(null),c=n(null),y=async()=>{if(r.value=null,m.value=null,c.value=null,!u.value){setTimeout(()=>{r.value="Se debe llenar el nombre de la sucursal"},50);return}if(!s.value){setTimeout(()=>{r.value="Se debe llenar la direcci贸n de la sucursal"},50);return}let k={name:u.value,address:s.value};try{const f=await I("sucursales",{method:"POST",body:k,onResponseError({response:p}){m.value=p._data.error}});console.log(f),f.message==403?m.value=f.message_text:(c.value="La sucursal se ha registrado correctamente",_("addSucursal",f.sucursal),u.value="",s.value="",r.value=null,m.value=null,c.value=null,V())}catch(f){console.log(f)}},V=()=>{_("update:isDialogVisible",!1)},C=k=>{_("update:isDialogVisible",k)};return(k,f)=>{const p=q;return b(),g(G,{"max-width":"650","model-value":i.isDialogVisible,"onUpdate:modelValue":C},{default:e(()=>[l(R,{class:"pa-sm-11 pa-3"},{default:e(()=>[l(p,{variant:"text",size:"default",onClick:V}),l(N,{class:"pt-5"},{default:e(()=>[ue,l(O,{class:"mt-4",onSubmit:L(y,["prevent"])},{default:e(()=>[l(j,null,{default:e(()=>[l(d,{cols:"12"},{default:e(()=>[l(K,{modelValue:a(u),"onUpdate:modelValue":f[0]||(f[0]=o=>h(u)?u.value=o:null),label:"Nombre",placeholder:"Example: Admin"},null,8,["modelValue"])]),_:1}),a(r)?(b(),g(d,{key:0,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"warning"},{default:e(()=>[v(S(a(r)),1)]),_:1})]),_:1})):x("",!0),a(m)?(b(),g(d,{key:1,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"error"},{default:e(()=>[v(S(a(m)),1)]),_:1})]),_:1})):x("",!0),a(c)?(b(),g(d,{key:2,cols:"12"},{default:e(()=>[l(w,{closable:"","close-label":"Close Alert",color:"success"},{default:e(()=>[v(S(a(c)),1)]),_:1})]),_:1})):x("",!0),l(d,{cols:"12"},{default:e(()=>[l(M,{modelValue:a(s),"onUpdate:modelValue":f[1]||(f[1]=o=>h(s)?s.value=o:null),label:"Direcci贸n: ",placeholder:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[l(U,{type:"submit"},{default:e(()=>[v(" Guardar ")]),_:1}),l(U,{color:"secondary",variant:"outlined",onClick:V},{default:e(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ie={class:"text-h6"},ne={class:"d-flex gap-1"},Fe={__name:"sucursales",setup($){const T=[{title:"ID",key:"id"},{title:"Sucursal",key:"name"},{title:"Direcci贸n",key:"address"},{title:"Fecha de registro",key:"created_at"},{title:"Acciones",key:"action"}],i=n(!1),_=n(!1),u=n(!1),s=n([]),r=n(null),m=n(null),c=n(null),y=async()=>{try{const o=await I("sucursales?search="+(r.value?r.value:""),{method:"GET",onResponseError({response:t}){console.log(t._data.error)}});console.log(o),s.value=o.sucursales}catch(o){console.log(o)}},V=o=>{console.log(o);let t=s.value;s.value=[],t.unshift(o),setTimeout(()=>{s.value=t},50)},C=o=>{console.log(o);let t=s.value;s.value=[];let A=t.findIndex(B=>B.id==o.id);A!=-1&&(t[A]=o),setTimeout(()=>{s.value=t},50)},k=o=>{console.log(o);let t=s.value;s.value=[];let A=t.findIndex(B=>B.id==o.id);A!=-1&&t.splice(A,1),setTimeout(()=>{s.value=t},50)},f=o=>{console.log(o),_.value=!0,m.value=o},p=o=>{u.value=!0,c.value=o};return z(()=>{y()}),(o,t)=>{const A=Y,B=re,P=oe,X=ae;return b(),Q("div",null,[l(R,{title:" Sucursales"},{default:e(()=>[l(N,null,{default:e(()=>[l(j,{class:"justify-space-between"},{default:e(()=>[l(d,{cols:"3"},{default:e(()=>[l(K,{placeholder:"Buscar Sucursal",density:"compact",class:"me-3",modelValue:a(r),"onUpdate:modelValue":t[0]||(t[0]=D=>h(r)?r.value=D:null),onKeyup:J(y,["enter"])},null,8,["modelValue"])]),_:1}),l(d,{cols:"2",class:"text-end"},{default:e(()=>[l(U,{onClick:t[1]||(t[1]=D=>i.value=!a(i))},{default:e(()=>[v(" A帽adir Sucursal "),l(F,{end:"",icon:"ri-add-line"})]),_:1})]),_:1})]),_:1})]),_:1}),l(Z,{headers:T,items:a(s),"items-per-page":5,class:"text-no-wrap"},{"item.id":e(({item:D})=>[E("span",ie,S(D.id),1)]),"item.action":e(({item:D})=>[E("div",ne,[l(A,{size:"small",onClick:H=>f(D)},{default:e(()=>[l(F,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),l(A,{size:"small",onClick:H=>p(D)},{default:e(()=>[l(F,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])]),_:1},8,["items"])]),_:1}),l(B,{isDialogVisible:a(i),"onUpdate:isDialogVisible":t[2]||(t[2]=D=>h(i)?i.value=D:null),onAddSucursal:V},null,8,["isDialogVisible"]),a(m)&&a(_)?(b(),g(P,{key:0,isDialogVisible:a(_),"onUpdate:isDialogVisible":t[3]||(t[3]=D=>h(_)?_.value=D:null),sucursalSelected:a(m),onEditSucursal:C},null,8,["isDialogVisible","sucursalSelected"])):x("",!0),a(c)&&a(u)?(b(),g(X,{key:1,isDialogVisible:a(u),"onUpdate:isDialogVisible":t[4]||(t[4]=D=>h(u)?u.value=D:null),sucursalSelected:a(c),onDeleteSucursal:k},null,8,["isDialogVisible","sucursalSelected"])):x("",!0)])}}};export{Fe as default};
